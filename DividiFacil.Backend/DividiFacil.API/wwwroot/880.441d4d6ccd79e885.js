"use strict";(self.webpackChunkdividi_facil_front_end=self.webpackChunkdividi_facil_front_end||[]).push([[880],{3817:(j,P,i)=>{i.d(P,{b:()=>h});var u=i(9330),p=i(7673),l=i(9437),m=i(6354),v=i(5312),_=i(8728);let h=(()=>{class f{http;apiUrl=`${v.c.apiUrl}/api/grupos`;constructor(a){this.http=a}crearGrupo(a){return console.log("[GrupoService] crearGrupo",{grupoCreacion:a}),this.http.post(this.apiUrl,a).pipe((0,l.W)(c=>(console.error("Error creando grupo:",c),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al crear grupo"}))))}obtenerGrupo(a){return console.log("[GrupoService] obtenerGrupo",{idGrupo:a}),this.http.get(`${this.apiUrl}/${a}`).pipe((0,l.W)(c=>(console.error("Error obteniendo grupo:",c),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al obtener grupo"}))))}obtenerGrupoPorId(a){return console.log("[GrupoService] obtenerGrupoPorId",{idGrupo:a}),this.obtenerGrupo(a)}obtenerGrupoConMiembros(a){return console.log("[GrupoService] obtenerGrupoConMiembros",{idGrupo:a}),this.http.get(`${this.apiUrl}/${a}/con-miembros`).pipe((0,l.W)(c=>(console.error("Error obteniendo grupo con miembros:",c),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al obtener grupo con miembros"}))))}obtenerGrupos(){return console.log("[GrupoService] obtenerGrupos"),this.http.get(this.apiUrl).pipe((0,m.T)(a=>({exito:a.exito,data:a.data??[],mensaje:a.mensaje})),(0,l.W)(a=>(console.error("Error obteniendo grupos:",a),(0,p.of)({exito:!1,data:[],mensaje:"Error al obtener grupos"}))))}obtenerGrupoPorCodigo(a){return console.log("[GrupoService] obtenerGrupoPorCodigo",{codigo:a}),this.http.get(`${this.apiUrl}/codigo/${a}`).pipe((0,l.W)(c=>(console.error("Error obteniendo grupo por c\xf3digo:",c),(0,p.of)({exito:!1,data:void 0,mensaje:"C\xf3digo de acceso inv\xe1lido"}))))}agregarMiembro(a,c){return console.log("[GrupoService] agregarMiembro",{idGrupo:a,invitacion:c}),this.http.post(`${this.apiUrl}/${a}/miembros`,c).pipe((0,l.W)(t=>(console.error("Error agregando miembro:",t),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al agregar miembro"}))))}eliminarMiembro(a,c){return console.log("[GrupoService] eliminarMiembro",{idGrupo:a,idMiembro:c}),this.http.delete(`${this.apiUrl}/${a}/miembros/${c}`).pipe((0,l.W)(t=>(console.error("Error eliminando miembro:",t),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al eliminar miembro"}))))}cambiarRolMiembro(a,c,t){return console.log("[GrupoService] cambiarRolMiembro",{idGrupo:a,idMiembro:c,nuevoRol:t}),this.http.put(`${this.apiUrl}/${a}/miembros/${c}/rol`,{nuevoRol:t}).pipe((0,l.W)(C=>(console.error("Error cambiando rol:",C),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al cambiar rol"}))))}generarCodigoAcceso(a){return console.log("[GrupoService] generarCodigoAcceso",{idGrupo:a}),this.http.post(`${this.apiUrl}/${a}/codigo-acceso`,{}).pipe((0,l.W)(c=>(console.error("Error generando c\xf3digo:",c),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al generar c\xf3digo de acceso"}))))}actualizarGrupo(a,c){return console.log("[GrupoService] actualizarGrupo",{idGrupo:a,grupoActualizacion:c}),this.http.put(`${this.apiUrl}/${a}`,c).pipe((0,l.W)(t=>(console.error("Error actualizando grupo:",t),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al actualizar grupo"}))))}eliminarGrupo(a){return console.log("[GrupoService] eliminarGrupo",{idGrupo:a}),this.http.delete(`${this.apiUrl}/${a}`).pipe((0,l.W)(c=>(console.error("Error eliminando grupo:",c),(0,p.of)({exito:!1,data:void 0,mensaje:"Error al eliminar grupo"}))))}unirseConCodigo(a){return console.log("[GrupoService] unirseConCodigo",{codigo:a}),this.obtenerGrupoPorCodigo(a)}obtenerMiembros(a){return console.log("[GrupoService] obtenerMiembros",{idGrupo:a}),this.obtenerGrupoConMiembros(a)}obtenerGruposPaginados(a=1,c=10){console.log("[GrupoService] obtenerGruposPaginados",{pagina:a,limite:c});const t=(new u.Nl).set("pagina",a.toString()).set("limite",c.toString());return this.http.get(this.apiUrl,{params:t}).pipe((0,l.W)(d=>(console.error("Error obteniendo grupos paginados:",d),(0,p.of)({exito:!1,data:[],totalRegistros:0,totalPaginas:0,paginaActual:1,registrosPorPagina:c,mensaje:"Error al obtener grupos"}))))}getGrupos(){return console.log("[GrupoService] getGrupos"),this.obtenerGrupos()}static \u0275fac=function(c){return new(c||f)(_.KVO(u.Qq))};static \u0275prov=_.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},5880:(j,P,i)=>{i.r(P),i.d(P,{DashboardComponent:()=>st});var u=i(2200),p=i(5596),l=i(8834),m=i(1074),v=i(8132),_=i(9183),h=i(1413),f=i(7468),x=i(6977),a=i(9947),c=i(4333),t=i(3664),d=i(8728),C=i(7705),k=i(948),y=i(3817);function $(e,s){1&e&&(t.j41(0,"div",6),t.nrm(1,"app-loading-spinner",7),t.k0s())}function I(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",8)(1,"app-card",9),t.qex(2,1),t.j41(3,"mat-icon",10),t.EFF(4,"error"),t.k0s(),t.j41(5,"span"),t.EFF(6),t.k0s(),t.j41(7,"button",11),t.bIt("click",function(){d.eBV(n);const r=t.XpG();return d.Njj(r.refrescar())}),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s(),t.EFF(10," Reintentar "),t.k0s(),t.bVm(),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(6),t.JRh(n.error)}}function S(e,s){if(1&e&&(t.qex(0),t.EFF(1),t.nI1(2,"currency"),t.bVm()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.ii3(2,1,n.valor,"ARS","symbol-narrow","1.0-0")," ")}}function D(e,s){if(1&e&&(t.qex(0),t.EFF(1),t.bVm()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.valor," ")}}function A(e,s){if(1&e&&(t.j41(0,"div",22)(1,"mat-icon",23),t.EFF(2),t.k0s()()),2&e){const n=t.XpG().$implicit;t.R7$(),t.BMQ("data-trend",n.tendencia),t.R7$(),t.SpI(" ","up"===n.tendencia?"trending_up":"down"===n.tendencia?"trending_down":"trending_flat"," ")}}function T(e,s){if(1&e&&(t.j41(0,"app-card",14),t.qex(1,15),t.j41(2,"div",16)(3,"mat-icon"),t.EFF(4),t.k0s()(),t.j41(5,"span"),t.EFF(6),t.k0s(),t.j41(7,"span",17),t.EFF(8),t.k0s(),t.bVm(),t.qex(9,1),t.j41(10,"div",18)(11,"span",19),t.DNE(12,S,3,6,"ng-container",20)(13,D,2,1,"ng-container",20),t.k0s(),t.DNE(14,A,3,2,"div",21),t.k0s(),t.bVm(),t.k0s()),2&e){const n=s.$implicit;t.Y8G("cardClass","stat-card "+n.color),t.R7$(2),t.BMQ("data-color",n.color),t.R7$(2),t.JRh(n.icono),t.R7$(2),t.JRh(n.titulo),t.R7$(2),t.JRh(n.subtitulo),t.R7$(3),t.BMQ("data-color",n.color),t.R7$(),t.Y8G("ngIf",n.titulo.includes("Monto")),t.R7$(),t.Y8G("ngIf",!n.titulo.includes("Monto")),t.R7$(),t.Y8G("ngIf",n.tendencia)}}function U(e,s){if(1&e&&(t.j41(0,"div",12),t.DNE(1,T,15,9,"app-card",13),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.estadisticas)("ngForTrackBy",n.trackByEstadisticaTitulo)}}function B(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",24)(1,"mat-card")(2,"mat-card-content")(3,"mat-icon",25),t.EFF(4,"analytics"),t.k0s(),t.j41(5,"h3"),t.EFF(6,"No hay estad\xedsticas disponibles"),t.k0s(),t.j41(7,"p"),t.EFF(8,"Cuando tengas grupos y gastos, las estad\xedsticas aparecer\xe1n aqu\xed"),t.k0s(),t.j41(9,"button",26),t.bIt("click",function(){d.eBV(n);const r=t.XpG();return d.Njj(r.refrescar())}),t.j41(10,"mat-icon"),t.EFF(11,"refresh"),t.k0s(),t.EFF(12," Actualizar "),t.k0s()()()()}}let z=(()=>{class e{gastoService;grupoService;cdr;idUsuario="";estadisticas=[];cargando=!1;loading=!1;error=null;destroy$=new h.B;constructor(n,o,r){this.gastoService=n,this.grupoService=o,this.cdr=r}ngOnInit(){this.idUsuario&&this.cargarEstadisticas()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarEstadisticas(){this.cargando=!0,this.loading=!0,this.error=null,this.cdr.markForCheck(),(0,f.p)({grupos:this.grupoService.obtenerGrupos(),gastos:this.gastoService.obtenerRecientes(50)}).pipe((0,x.Q)(this.destroy$)).subscribe({next:n=>{console.log("\u{1f4ca} Datos para estad\xedsticas:",n),this.procesarEstadisticas(n),this.cargando=!1,this.loading=!1,this.cdr.markForCheck()},error:n=>{console.error("\u274c Error al cargar estad\xedsticas:",n),this.error="Error al cargar las estad\xedsticas.",this.cargando=!1,this.loading=!1,this.cdr.markForCheck()}})}procesarEstadisticas(n){console.log("\u{1f504} Procesando estad\xedsticas:",n);const o=Array.isArray(n.grupos)?n.grupos:n.grupos?.data||[],r=n.gastos?.data||[],g=o.length,b=r.reduce((F,lt)=>F+(lt.monto||0),0),O=this.calcularGastosEsteMes(r),dt=o.filter(F=>"Inactivo"!==F.estadoGrupo).length;this.estadisticas=[{titulo:"Total Grupos",valor:g,icono:"group",color:"primary",subtitulo:`${dt} activos`,tendencia:g>0?"up":"stable"},{titulo:"Gastos del Mes",valor:O,icono:"calendar_month",color:"accent",subtitulo:"Este mes",tendencia:O>0?"up":"stable"},{titulo:"Monto Total",valor:b,icono:"account_balance_wallet",color:"warn",subtitulo:"En gastos",tendencia:b>0?"up":"stable"},{titulo:"Gastos Totales",valor:r.length,icono:"receipt_long",color:"primary",subtitulo:"Registrados",tendencia:r.length>0?"up":"stable"}],console.log("\u{1f4ca} Estad\xedsticas calculadas:",this.estadisticas)}calcularGastosEsteMes(n){const o=new Date,r=o.getMonth(),g=o.getFullYear();return n.filter(b=>{const O=new Date(b.fechaCreacion||b.fechaGasto);return O.getMonth()===r&&O.getFullYear()===g}).length}trackByEstadisticaTitulo=(n,o)=>o.titulo;refrescar(){this.cargarEstadisticas()}static \u0275fac=function(o){return new(o||e)(t.rXU(k.Y),t.rXU(y.b),t.rXU(C.gRc))};static \u0275cmp=t.VBU({type:e,selectors:[["app-dashboard-stats"]],inputs:{idUsuario:"idUsuario"},decls:6,vars:4,consts:[["cardClass","dashboard-stats-container"],["card-content",""],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","stats-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],["text","Cargando estad\xedsticas..."],[1,"error-container"],["cardClass","error-card"],["color","warn"],["mat-button","","color","primary",3,"click"],[1,"stats-grid"],[3,"cardClass",4,"ngFor","ngForOf","ngForTrackBy"],[3,"cardClass"],["card-header",""],[1,"stat-icon"],[1,"subtitle"],[1,"stat-value"],[1,"value"],[4,"ngIf"],["class","trend-indicator",4,"ngIf"],[1,"trend-indicator"],[1,"trend-icon"],[1,"empty-state"],[1,"empty-icon"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,r){1&o&&(t.j41(0,"app-card",0),t.qex(1,1),t.DNE(2,$,2,0,"div",2)(3,I,11,1,"div",3)(4,U,2,2,"div",4)(5,B,13,0,"div",5),t.bVm(),t.k0s()),2&o&&(t.R7$(2),t.Y8G("ngIf",r.cargando),t.R7$(),t.Y8G("ngIf",r.error&&!r.cargando),t.R7$(),t.Y8G("ngIf",!r.cargando&&!r.error&&r.estadisticas.length>0),t.R7$(),t.Y8G("ngIf",!r.cargando&&!r.error&&0===r.estadisticas.length))},dependencies:[u.MD,u.Sq,u.bT,u.oe,a.i,c.N,p.Hu,p.RN,p.m2,l.Hl,l.$z,m.m_,m.An,_.D6],styles:[".stats-container[_ngcontent-%COMP%]{width:100%;padding:1rem}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.loading-card[_ngcontent-%COMP%]{max-width:300px;text-align:center}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.loading-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-top:1rem}.stat-card[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%}.stat-card[_ngcontent-%COMP%]   .stat-icon[data-color=primary][_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.stat-card[_ngcontent-%COMP%]   .stat-icon[data-color=accent][_ngcontent-%COMP%]{background-color:#fce4ec;color:#c2185b}.stat-card[_ngcontent-%COMP%]   .stat-icon[data-color=warn][_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:1rem}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .value[data-color=primary][_ngcontent-%COMP%]{color:#1976d2}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .value[data-color=accent][_ngcontent-%COMP%]{color:#c2185b}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .value[data-color=warn][_ngcontent-%COMP%]{color:#f57c00}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .trend-indicator[_ngcontent-%COMP%]   .trend-icon[_ngcontent-%COMP%]{font-size:1.2rem}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .trend-indicator[_ngcontent-%COMP%]   .trend-icon[data-trend=up][_ngcontent-%COMP%]{color:#4caf50}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .trend-indicator[_ngcontent-%COMP%]   .trend-icon[data-trend=down][_ngcontent-%COMP%]{color:#f44336}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]   .trend-indicator[_ngcontent-%COMP%]   .trend-icon[data-trend=stable][_ngcontent-%COMP%]{color:#ff9800}.empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;text-align:center;padding:2rem}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:#ccc;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#666;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#999;margin-bottom:1rem}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.stat-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:.5rem}.stat-info[_ngcontent-%COMP%]{order:2}.stat-icon[_ngcontent-%COMP%]{order:1}.stat-tendencia[_ngcontent-%COMP%]{order:3}}"],changeDetection:0})}return e})();var M=i(6471),E=i(1782);function Y(e,s){1&e&&(t.j41(0,"div",9),t.nrm(1,"app-loading-spinner",10),t.k0s())}function V(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",11)(1,"mat-icon",12),t.EFF(2,"error"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s(),t.j41(5,"button",13),t.bIt("click",function(){d.eBV(n);const r=t.XpG();return d.Njj(r.cargarGruposRecientes())}),t.j41(6,"mat-icon"),t.EFF(7,"refresh"),t.k0s(),t.EFF(8," Reintentar "),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(4),t.JRh(n.error)}}function X(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",14)(1,"mat-icon",15),t.EFF(2,"group_add"),t.k0s(),t.j41(3,"h4"),t.EFF(4,"No tienes grupos a\xfan"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Crea tu primer grupo para comenzar a dividir gastos"),t.k0s(),t.j41(7,"button",16),t.bIt("click",function(){d.eBV(n);const r=t.XpG();return d.Njj(r.crearGrupo())}),t.j41(8,"mat-icon"),t.EFF(9,"add"),t.k0s(),t.EFF(10," Crear Grupo "),t.k0s()()}}function N(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",19),t.bIt("click",function(){const r=d.eBV(n).$implicit,g=t.XpG(2);return d.Njj(g.verGrupo(r.idGrupo))}),t.j41(1,"div",20)(2,"div",21)(3,"h4",22),t.EFF(4),t.k0s(),t.j41(5,"mat-chip",23),t.EFF(6),t.k0s()(),t.j41(7,"p",24),t.EFF(8),t.k0s(),t.j41(9,"div",25)(10,"span")(11,"mat-icon"),t.EFF(12,"people"),t.k0s(),t.EFF(13),t.k0s(),t.j41(14,"span")(15,"mat-icon"),t.EFF(16,"attach_money"),t.k0s(),t.EFF(17),t.nI1(18,"currency"),t.k0s(),t.j41(19,"span")(20,"mat-icon"),t.EFF(21,"person"),t.k0s(),t.EFF(22),t.k0s(),t.j41(23,"span")(24,"mat-icon"),t.EFF(25,"schedule"),t.k0s(),t.EFF(26),t.nI1(27,"date"),t.k0s()()(),t.j41(28,"div",26)(29,"mat-icon"),t.EFF(30,"chevron_right"),t.k0s()()()}if(2&e){const n=s.$implicit,o=t.XpG(2);t.BMQ("data-grupo-id",n.idGrupo),t.R7$(4),t.JRh(n.nombreGrupo),t.R7$(),t.Y8G("color",o.obtenerColorModo(n.modoOperacion)),t.R7$(),t.SpI(" ",n.modoOperacion," "),t.R7$(2),t.SpI(" ",n.descripcion||"Sin descripci\xf3n"," "),t.R7$(5),t.SpI(" ",n.cantidadMiembros," miembros "),t.R7$(4),t.SpI(" ",t.ii3(18,9,n.totalGastos,"ARS","symbol-narrow","1.0-0")," "),t.R7$(5),t.SpI(" ",n.nombreCreador||"Sin creador"," "),t.R7$(4),t.SpI(" ",t.i5U(27,14,n.fechaCreacion,"short")," ")}}function H(e,s){if(1&e&&(t.j41(0,"div",17),t.DNE(1,N,31,17,"div",18),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.grupos)("ngForTrackBy",n.trackByGrupoId)}}let W=(()=>{class e{grupoService;router;cdr;grupos=[];cargando=!1;error=null;destroy$=new h.B;constructor(n,o,r){this.grupoService=n,this.router=o,this.cdr=r}ngOnInit(){this.cargarGruposRecientes()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarGruposRecientes(){this.cargando=!0,this.error=null,this.cdr.markForCheck(),console.log("\u{1f504} Cargando grupos recientes..."),this.grupoService.obtenerGrupos().pipe((0,x.Q)(this.destroy$)).subscribe({next:n=>{this.cargando=!1,n.exito&&Array.isArray(n.data)?(console.log("\u{1f465} Grupos REALES obtenidos:",n.data),this.grupos=n.data.filter(o=>"Activo"===o.idGrupo).sort((o,r)=>{const g=new Date(o.fechaCreacion||o.fechaCreacion);return new Date(r.fechaCreacion||r.fechaCreacion).getTime()-g.getTime()}).slice(0,6)):Array.isArray(n)?this.grupos=n.sort((o,r)=>new Date(r.fechaCreacion).getTime()-new Date(o.fechaCreacion).getTime()).slice(0,6):(this.grupos=[],this.error="No se pudieron cargar los grupos."),this.cdr.markForCheck()},error:n=>{console.error("\u274c Error al cargar grupos recientes:",n),this.error="Error al cargar los grupos recientes.",this.grupos=[],this.cargando=!1,this.cdr.markForCheck()}})}verGrupo(n){console.log("\u{1f517} Navegando a grupo:",n),this.router.navigate(["/grupos",n])}verTodosLosGrupos(){this.router.navigate(["/grupos"])}crearGrupo(){this.router.navigate(["/grupos/alta"])}obtenerColorModo(n){switch(n){case"Equitativo":default:return"primary";case"Proporcional":return"accent";case"Estandar":return"warn"}}trackByGrupoId=(n,o)=>o.idGrupo;static \u0275fac=function(o){return new(o||e)(t.rXU(y.b),t.rXU(E.Ix),t.rXU(C.gRc))};static \u0275cmp=t.VBU({type:e,selectors:[["app-recent-groups"]],decls:13,vars:4,consts:[["cardClass","recent-groups-card"],["card-header",""],["color","primary"],[1,"subtitle"],["card-content",""],["class","loading-container",4,"ngIf"],["class","error-message",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","groups-list",4,"ngIf"],[1,"loading-container"],["text","Cargando grupos..."],[1,"error-message"],["color","warn"],["mat-button","","color","primary",3,"click"],[1,"empty-state"],[1,"empty-icon"],["mat-raised-button","","color","primary",3,"click"],[1,"groups-list"],["class","group-item",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group-item",3,"click"],[1,"group-info"],[1,"group-header"],[1,"group-name"],[1,"status-chip",3,"color"],[1,"group-description"],[1,"group-meta"],[1,"group-action"]],template:function(o,r){1&o&&(t.j41(0,"app-card",0),t.qex(1,1),t.j41(2,"mat-icon",2),t.EFF(3,"group"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Grupos Recientes"),t.k0s(),t.j41(6,"span",3),t.EFF(7,"\xdaltimos grupos donde has participado"),t.k0s(),t.bVm(),t.qex(8,4),t.DNE(9,Y,2,0,"div",5)(10,V,9,1,"div",6)(11,X,11,0,"div",7)(12,H,2,2,"div",8),t.bVm(),t.k0s()),2&o&&(t.R7$(9),t.Y8G("ngIf",r.cargando),t.R7$(),t.Y8G("ngIf",r.error&&!r.cargando),t.R7$(),t.Y8G("ngIf",!r.cargando&&!r.error&&0===r.grupos.length),t.R7$(),t.Y8G("ngIf",!r.cargando&&!r.error&&r.grupos.length>0))},dependencies:[u.MD,u.Sq,u.bT,u.oe,u.vh,p.Hu,l.Hl,l.$z,m.m_,m.An,M.YN,M.Jl,_.D6,a.i,c.N],styles:['@charset "UTF-8";.loading-container[_ngcontent-%COMP%]{padding:40px 0;text-align:center}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;background-color:#ffebee;border-radius:8px;color:#d32f2f}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#999;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin:0 0 8px;font-size:1.125rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0 0 24px;font-size:.875rem}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 auto}.groups-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 0;border-bottom:1px solid #e0e0e0;cursor:pointer;transition:background-color .2s ease}.groups-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.groups-list[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-radius:8px;margin:0 -8px;padding-left:8px;padding-right:8px}.groups-list[_ngcontent-%COMP%]   .group-info[_ngcontent-%COMP%]{flex:1;min-width:0}.groups-list[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}.groups-list[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#333;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.groups-list[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{font-size:.75rem;height:24px;line-height:24px}.groups-list[_ngcontent-%COMP%]   .group-description[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin:0 0 8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.groups-list[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:.75rem;color:#999}.groups-list[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.groups-list[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.groups-list[_ngcontent-%COMP%]   .group-action[_ngcontent-%COMP%]{margin-left:8px}.groups-list[_ngcontent-%COMP%]   .group-action[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#999;font-size:20px;width:20px;height:20px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:16px;padding-top:16px;border-top:1px solid #e0e0e0}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}@media (max-width: 600px){.groups-list[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.groups-list[_ngcontent-%COMP%]   .group-meta[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}}[_nghost-%COMP%]{contain:layout style paint;display:block}.dashboard-container[_ngcontent-%COMP%], .stats-container[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%], .timeline-list[_ngcontent-%COMP%]{transform:translateZ(0);will-change:transform}mat-card[_ngcontent-%COMP%]{backface-visibility:hidden}.dashboard-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}'],changeDetection:0})}return e})();var R=i(1975);function L(e,s){if(1&e){const n=t.RV6();t.j41(0,"button",12),t.bIt("click",function(){const r=d.eBV(n).$implicit,g=t.XpG();return d.Njj(g.ejecutarAccion(r))}),t.j41(1,"div",13)(2,"div",14)(3,"mat-icon",15),t.EFF(4),t.k0s()(),t.j41(5,"div",16)(6,"h3",17),t.EFF(7),t.k0s(),t.j41(8,"p",18),t.EFF(9),t.k0s()()()()}if(2&e){const n=s.$implicit;t.HbH("action-"+n.color),t.Y8G("color",n.color)("disabled",n.deshabilitado),t.R7$(3),t.Y8G("matBadge",n.badge||0)("matBadgeHidden",!n.badge),t.R7$(),t.SpI(" ",n.icono," "),t.R7$(3),t.JRh(n.titulo),t.R7$(2),t.JRh(n.descripcion)}}let J=(()=>{class e{router;cdr;actions=[];loading=!1;destroy$=new h.B;constructor(n,o){this.router=n,this.cdr=o}ngOnInit(){this.inicializarAcciones()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}inicializarAcciones(){this.actions=[{id:"crear-grupo",titulo:"Crear Grupo",descripcion:"Inicia un nuevo grupo para dividir gastos",icono:"group_add",color:"primary",ruta:"/grupos/alta",destacado:!0},{id:"registrar-gasto",titulo:"Registrar Gasto",descripcion:"Agrega un nuevo gasto a tus grupos",icono:"add_shopping_cart",color:"accent",ruta:"/gastos/alta",destacado:!1},{id:"realizar-pago",titulo:"Realizar Pago",descripcion:"Salda tus cuentas pendientes",icono:"payment",color:"warn",ruta:"/pagos/alta",destacado:!1},{id:"unirse-grupo",titulo:"Unirse a Grupo",descripcion:"\xdanete a un grupo usando un c\xf3digo",icono:"group",color:"primary",ruta:"/grupos/unirse",destacado:!1},{id:"ver-balance",titulo:"Ver Balance",descripcion:"Revisa tu balance general",icono:"account_balance",color:"accent",ruta:"/balances/usuario",destacado:!1},{id:"notificaciones",titulo:"Notificaciones",descripcion:"Revisa tus notificaciones",icono:"notifications",color:"warn",ruta:"/notificaciones",destacado:!1,badge:0}]}ejecutarAccion(n){console.log("\u{1f680} Ejecutando acci\xf3n:",n.titulo),n.ruta?this.router.navigate([n.ruta]):n.accion&&n.accion()}trackByActionId=(n,o)=>o.id;static \u0275fac=function(o){return new(o||e)(t.rXU(E.Ix),t.rXU(C.gRc))};static \u0275cmp=t.VBU({type:e,selectors:[["app-quick-actions"]],decls:24,vars:2,consts:[["cardClass","quick-actions-card"],["card-header",""],["color","primary"],[1,"subtitle"],["card-content",""],[1,"actions-grid"],["mat-raised-button","","class","action-button",3,"color","disabled","class","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"divider"],[1,"secondary-actions"],[1,"secondary-title"],[1,"secondary-buttons"],["mat-button","","color","primary",3,"click"],["mat-raised-button","",1,"action-button",3,"click","color","disabled"],[1,"action-content"],[1,"action-icon"],["matBadgeColor","warn","matBadgeSize","small",3,"matBadge","matBadgeHidden"],[1,"action-text"],[1,"action-title"],[1,"action-description"]],template:function(o,r){1&o&&(t.j41(0,"app-card",0),t.qex(1,1),t.j41(2,"mat-icon",2),t.EFF(3,"flash_on"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Acciones R\xe1pidas"),t.k0s(),t.j41(6,"span",3),t.EFF(7,"Accede r\xe1pidamente a las funciones principales"),t.k0s(),t.bVm(),t.qex(8,4),t.j41(9,"div",5),t.DNE(10,L,10,9,"button",6),t.k0s(),t.nrm(11,"div",7),t.j41(12,"div",8)(13,"h5",9),t.EFF(14,"Accesos directos"),t.k0s(),t.j41(15,"div",10)(16,"button",11),t.bIt("click",function(){return r.router.navigate(["/grupos"])}),t.j41(17,"mat-icon"),t.EFF(18,"list"),t.k0s(),t.EFF(19," Ver todos los grupos "),t.k0s(),t.j41(20,"button",11),t.bIt("click",function(){return r.router.navigate(["/pagos"])}),t.j41(21,"mat-icon"),t.EFF(22,"payment"),t.k0s(),t.EFF(23," Ver todos los pagos "),t.k0s()()(),t.bVm(),t.k0s()),2&o&&(t.R7$(10),t.Y8G("ngForOf",r.actions)("ngForTrackBy",r.trackByActionId))},dependencies:[u.MD,u.Sq,a.i,p.Hu,l.Hl,l.$z,m.m_,m.An,R.Y,R.k,v.iI],styles:['@charset "UTF-8";.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px;margin-bottom:24px}.action-button[_ngcontent-%COMP%]{padding:16px;height:auto;min-height:80px;border-radius:12px;text-align:left;transition:all .3s ease;border:2px solid transparent}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.action-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-button.action-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1976d2,#1565c0);color:#fff}.action-button.action-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #1976d24d}.action-button.action-accent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff4081,#e91e63);color:#fff}.action-button.action-accent[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #ff40814d}.action-button.action-warn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00);color:#fff}.action-button.action-warn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #ff98004d}.action-button.action-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#388e3c);color:#fff}.action-button.action-success[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #4caf504d}.action-button.action-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2);color:#fff}.action-button.action-info[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #2196f34d}.action-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;width:100%;text-align:left}.action-icon[_ngcontent-%COMP%]{flex-shrink:0}.action-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;opacity:.9}.action-text[_ngcontent-%COMP%]{flex:1;min-width:0}.action-text[_ngcontent-%COMP%]   .action-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin:0 0 4px;color:inherit;line-height:1.2}.action-text[_ngcontent-%COMP%]   .action-description[_ngcontent-%COMP%]{font-size:.875rem;margin:0;opacity:.9;color:inherit;line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.divider[_ngcontent-%COMP%]{height:1px;background:linear-gradient(90deg,transparent 0%,#e0e0e0 50%,transparent 100%);margin:16px 0}.secondary-actions[_ngcontent-%COMP%]   .secondary-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#666;margin:0 0 12px;text-transform:uppercase;letter-spacing:.5px}.secondary-actions[_ngcontent-%COMP%]   .secondary-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.secondary-actions[_ngcontent-%COMP%]   .secondary-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.875rem;padding:8px 12px;border-radius:8px}.secondary-actions[_ngcontent-%COMP%]   .secondary-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}@media (max-width: 768px){.actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.action-button[_ngcontent-%COMP%]{min-height:70px;padding:12px}.action-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.action-text[_ngcontent-%COMP%]   .action-title[_ngcontent-%COMP%]{font-size:.925rem}.action-text[_ngcontent-%COMP%]   .action-description[_ngcontent-%COMP%]{font-size:.8rem}}@media (max-width: 480px){.secondary-buttons[_ngcontent-%COMP%]{flex-direction:column}.secondary-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.action-description[_ngcontent-%COMP%]{white-space:normal!important;overflow:visible!important;text-overflow:unset!important}}[_nghost-%COMP%]{contain:layout style paint;display:block}.dashboard-container[_ngcontent-%COMP%], .stats-container[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%], .timeline-list[_ngcontent-%COMP%]{transform:translateZ(0);will-change:transform}mat-card[_ngcontent-%COMP%]{backface-visibility:hidden}.dashboard-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}'],changeDetection:0})}return e})();var w=i(8776),G=i(6627);function Q(e,s){if(1&e){const n=t.RV6();t.j41(0,"mat-chip-option",12),t.bIt("selectionChange",function(){const r=d.eBV(n).$implicit,g=t.XpG(2);return d.Njj(g.aplicarFiltro(r))}),t.EFF(1),t.k0s()}if(2&e){const n=s.$implicit;t.Y8G("selected",n.activo),t.R7$(),t.SpI(" ",n.nombre," ")}}function K(e,s){if(1&e&&(t.j41(0,"div",10)(1,"mat-chip-listbox"),t.DNE(2,Q,2,2,"mat-chip-option",11),t.k0s()()),2&e){const n=t.XpG();t.R7$(2),t.Y8G("ngForOf",n.filtros)("ngForTrackBy",n.trackByFiltro)}}function Z(e,s){if(1&e&&(t.j41(0,"span",24)(1,"mat-icon"),t.EFF(2,"person"),t.k0s(),t.EFF(3),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",n.usuarioRelacionado," ")}}function q(e,s){if(1&e&&(t.j41(0,"span",24)(1,"mat-icon"),t.EFF(2,"group"),t.k0s(),t.EFF(3),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",n.grupoRelacionado," ")}}function tt(e,s){if(1&e&&(t.j41(0,"span",25),t.EFF(1),t.nI1(2,"currencyFormat"),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,n.monto)," ")}}function nt(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",15),t.bIt("mouseenter",function(r){d.eBV(n);const g=t.XpG(2);return d.Njj(g.onMouseEnter(r))})("mouseleave",function(r){d.eBV(n);const g=t.XpG(2);return d.Njj(g.onMouseLeave(r))}),t.j41(1,"div",16)(2,"mat-icon"),t.EFF(3),t.k0s()(),t.j41(4,"div",17)(5,"div",18)(6,"h4",19),t.EFF(7),t.k0s(),t.j41(8,"span",20),t.EFF(9),t.nI1(10,"dateFormat"),t.k0s()(),t.j41(11,"div",21),t.DNE(12,Z,4,1,"span",22)(13,q,4,1,"span",22)(14,tt,3,3,"span",23),t.k0s()()()}if(2&e){const n=s.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngStyle",o.getIconStyles(n.tipo)),t.R7$(2),t.JRh(n.icono),t.R7$(4),t.JRh(n.descripcion),t.R7$(2),t.JRh(t.bMT(10,7,n.fecha)),t.R7$(3),t.Y8G("ngIf",n.usuarioRelacionado),t.R7$(),t.Y8G("ngIf",n.grupoRelacionado),t.R7$(),t.Y8G("ngIf",n.monto>0)}}function et(e,s){if(1&e&&(t.j41(0,"div",13),t.DNE(1,nt,15,9,"div",14),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.actividadReciente)("ngForTrackBy",n.trackByItemId)}}function ot(e,s){1&e&&(t.j41(0,"div",26)(1,"mat-icon"),t.EFF(2,"history_toggle_off"),t.k0s(),t.j41(3,"h4"),t.EFF(4,"No hay actividad reciente"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Cuando registres gastos, pagos o movimientos, aparecer\xe1n aqu\xed."),t.k0s()())}function rt(e,s){1&e&&(t.j41(0,"div",27),t.nrm(1,"mat-spinner",28),t.j41(2,"p"),t.EFF(3,"Cargando actividad..."),t.k0s()())}function at(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",29)(1,"mat-icon",30),t.EFF(2,"error"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s(),t.j41(5,"button",31),t.bIt("click",function(){d.eBV(n);const r=t.XpG();return d.Njj(r.refrescar())}),t.j41(6,"mat-icon"),t.EFF(7,"refresh"),t.k0s(),t.EFF(8," Reintentar "),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(4),t.JRh(n.error)}}let it=(()=>{class e{gastoService;grupoService;cdr;destroy$=new h.B;actividadReciente=[];actividadOriginal=[];filtros=[{id:"todos",nombre:"Todos",activo:!0,tipo:"todos"},{id:"gastos",nombre:"Gastos",activo:!1,tipo:"gasto"},{id:"grupos",nombre:"Grupos",activo:!1,tipo:"grupo"}];loading=!1;error=null;constructor(n,o,r){this.gastoService=n,this.grupoService=o,this.cdr=r}ngOnInit(){this.cargarActividadReal()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarActividadReal(){this.loading=!0,this.error=null,this.cdr.markForCheck(),console.log("\u{1f504} Cargando actividad reciente..."),(0,f.p)({gastos:this.gastoService.obtenerRecientes(10),grupos:this.grupoService.obtenerGrupos()}).pipe((0,x.Q)(this.destroy$)).subscribe({next:n=>{console.log("\u{1f4ca} Datos recibidos:",n),this.procesarDatosActividad(n)},error:n=>{console.error("\u274c Error al cargar actividad:",n),this.error="Error al cargar la actividad reciente.",this.loading=!1,this.cdr.markForCheck()}})}procesarDatosActividad(n){if(this.actividadOriginal=[],n.gastos?.exito&&Array.isArray(n.gastos.data)){const r=n.gastos.data.slice(0,8).map(g=>this.mapearGastoAActividad(g));this.actividadOriginal.push(...r)}if(Array.isArray(n.grupos)){const o=n.grupos.sort((r,g)=>new Date(g.fechaCreacion).getTime()-new Date(r.fechaCreacion).getTime()).slice(0,3).map(r=>this.mapearGrupoAActividad(r));this.actividadOriginal.push(...o)}this.actividadReciente=this.actividadOriginal.sort((o,r)=>new Date(r.fecha).getTime()-new Date(o.fecha).getTime()).slice(0,10),this.loading=!1,this.cdr.markForCheck(),console.log("\u2705 Actividad procesada:",this.actividadReciente)}mapearGastoAActividad(n){return{id:n.idGasto,tipo:"gasto",descripcion:n.descripcion||"Gasto sin descripci\xf3n",monto:n.monto||0,fecha:new Date(n.fechaCreacion||n.fechaGasto),icono:this.obtenerIconoCategoria(n.categoria),usuarioRelacionado:n.nombreMiembroPagador||"Usuario",grupoRelacionado:n.nombreGrupo||"Grupo",categoria:n.categoria||"Sin categor\xeda",estado:"activo"}}mapearGrupoAActividad(n){return{id:n.idGrupo,tipo:"grupo",descripcion:`Grupo "${n.nombreGrupo}" creado`,monto:0,fecha:new Date(n.fechaCreacion),icono:"group_add",usuarioRelacionado:n.nombreCreador,grupoRelacionado:n.nombreGrupo,estado:"activo"}}obtenerIconoCategoria(n){return{Alimentaci\u00f3n:"restaurant",Transporte:"directions_car",Entretenimiento:"movie",Salud:"local_hospital",Otros:"receipt"}[n]||"receipt"}aplicarFiltro(n){this.filtros.forEach(o=>o.activo=!1),n.activo=!0,this.actividadReciente="todos"===n.tipo?this.actividadOriginal:this.actividadOriginal.filter(o=>o.tipo===n.tipo),this.cdr.markForCheck()}verTodosLosGastos(){console.log("\u{1f517} Navegando a todos los gastos")}refrescar(){this.cargarActividadReal()}getIconStyles(n){const o={"flex-shrink":"0",width:"40px",height:"40px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","margin-right":"1rem"};switch(n){case"gasto":return{...o,"background-color":"#ffebee",color:"#c62828"};case"grupo":return{...o,"background-color":"#e3f2fd",color:"#1565c0"};default:return o}}onMouseEnter(n){n.target.style.backgroundColor="#f5f5f5"}onMouseLeave(n){n.target.style.backgroundColor="transparent"}dateFormat(n){return(new w.a).transform(n)}currencyFormat(n){return(new G.l).transform(n)}trackByItemId=(n,o)=>o.id;trackByFiltro=(n,o)=>o.id;static \u0275fac=function(o){return new(o||e)(t.rXU(k.Y),t.rXU(y.b),t.rXU(C.gRc))};static \u0275cmp=t.VBU({type:e,selectors:[["app-recent-activity"]],decls:14,vars:5,consts:[["cardClass","recent-activity-card"],["card-header",""],["color","primary"],[1,"subtitle"],["card-content",""],["class","filters-container",4,"ngIf"],["class","timeline-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"filters-container"],[3,"selected","selectionChange",4,"ngFor","ngForOf","ngForTrackBy"],[3,"selectionChange","selected"],[1,"timeline-container"],["class","timeline-item",3,"mouseenter","mouseleave",4,"ngFor","ngForOf","ngForTrackBy"],[1,"timeline-item",3,"mouseenter","mouseleave"],[1,"timeline-icon",3,"ngStyle"],[1,"timeline-content"],[1,"timeline-header"],[1,"timeline-title"],[1,"timeline-date"],[1,"timeline-meta"],["class","meta-item",4,"ngIf"],["class","meta-amount",4,"ngIf"],[1,"meta-item"],[1,"meta-amount"],[1,"empty-state"],[1,"loading-container"],["diameter","40"],[1,"error-container"],["color","warn"],["mat-button","","color","primary",3,"click"]],template:function(o,r){1&o&&(t.j41(0,"app-card",0),t.qex(1,1),t.j41(2,"mat-icon",2),t.EFF(3,"history"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Actividad Reciente"),t.k0s(),t.j41(6,"span",3),t.EFF(7,"\xdaltimos movimientos"),t.k0s(),t.bVm(),t.qex(8,4),t.DNE(9,K,3,2,"div",5)(10,et,2,2,"div",6)(11,ot,7,0,"div",7)(12,rt,4,0,"div",8)(13,at,9,1,"div",9),t.bVm(),t.k0s()),2&o&&(t.R7$(9),t.Y8G("ngIf",r.filtros.length>0),t.R7$(),t.Y8G("ngIf",r.actividadReciente.length>0&&!r.loading),t.R7$(),t.Y8G("ngIf",0===r.actividadReciente.length&&!r.loading),t.R7$(),t.Y8G("ngIf",r.loading),t.R7$(),t.Y8G("ngIf",r.error))},dependencies:[u.MD,u.Sq,u.bT,u.B3,a.i,v.iI,p.Hu,l.Hl,l.$z,m.m_,m.An,M.YN,M.uI,M.gq,_.D6,_.LG,w.a,G.l],styles:['@charset "UTF-8";'],changeDetection:0})}return e})();var ct=i(7545);let st=(()=>{class e{authService;cdr;nombreUsuario="Usuario";saludoPersonalizado="";horaActual="";idUsuario="";intervalId;destroy$=new h.B;constructor(n,o){this.authService=n,this.cdr=o}ngOnInit(){this.cargarDatosUsuario(),this.configurarSaludo(),this.actualizarHora(),this.intervalId=window.setInterval(()=>{this.actualizarHora()},6e4)}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId),this.destroy$.next(),this.destroy$.complete()}cargarDatosUsuario(){const n=this.authService.obtenerUsuario();if(n?.nombre)this.nombreUsuario=n.nombre,this.idUsuario=n.idUsuario;else{const o=localStorage.getItem("token");if(o)try{const r=JSON.parse(atob(o.split(".")[1]));this.nombreUsuario=r.nombre||r.sub||"Usuario"}catch{console.warn("No se pudo extraer nombre del token")}}this.cdr.markForCheck()}configurarSaludo(){const n=(new Date).getHours();this.saludoPersonalizado=n<12?"\xa1Buenos d\xedas":n<18?"\xa1Buenas tardes":"\xa1Buenas noches",this.cdr.markForCheck()}actualizarHora(){this.horaActual=(new Date).toLocaleString("es-AR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),this.cdr.markForCheck()}logout(){this.authService.logout().subscribe({next:()=>{},error:n=>{console.error("Error al cerrar sesi\xf3n:",n),localStorage.clear(),window.location.href="/auth/login"}})}static \u0275fac=function(o){return new(o||e)(t.rXU(ct.u),t.rXU(C.gRc))};static \u0275cmp=t.VBU({type:e,selectors:[["app-dashboard"]],decls:34,vars:4,consts:[[1,"dashboard-container"],[1,"welcome-section"],["cardClass","welcome-card"],["card-content",""],[1,"welcome-content"],[1,"welcome-text"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"welcome-description"],[1,"welcome-actions"],["mat-raised-button","","color","primary","routerLink","/grupos/alta"],["mat-stroked-button","","routerLink","/gastos/alta"],["mat-button","",3,"click"],[1,"stats-section"],[3,"idUsuario"],[1,"main-content"],[1,"left-column"],[1,"right-column"],[1,"activity-section"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"app-card",2),t.qex(3,3),t.j41(4,"div",4)(5,"div",5)(6,"h1",6),t.EFF(7),t.k0s(),t.j41(8,"p",7),t.EFF(9),t.k0s(),t.j41(10,"p",8),t.EFF(11," Aqu\xed tienes un resumen de tu actividad en DividiF\xe1cil "),t.k0s()(),t.j41(12,"div",9)(13,"button",10)(14,"mat-icon"),t.EFF(15,"add"),t.k0s(),t.EFF(16," Crear Grupo "),t.k0s(),t.j41(17,"button",11)(18,"mat-icon"),t.EFF(19,"receipt_long"),t.k0s(),t.EFF(20," Nuevo Gasto "),t.k0s(),t.j41(21,"button",12),t.bIt("click",function(){return r.logout()}),t.j41(22,"mat-icon"),t.EFF(23,"logout"),t.k0s(),t.EFF(24," Cerrar Sesi\xf3n "),t.k0s()()(),t.bVm(),t.k0s()(),t.j41(25,"section",13),t.nrm(26,"app-dashboard-stats",14),t.k0s(),t.j41(27,"div",15)(28,"div",16),t.nrm(29,"app-recent-groups"),t.k0s(),t.j41(30,"div",17),t.nrm(31,"app-quick-actions"),t.k0s()(),t.j41(32,"section",18),t.nrm(33,"app-recent-activity"),t.k0s()()),2&o&&(t.R7$(7),t.Lme(" ",r.saludoPersonalizado,", ",r.nombreUsuario,"! "),t.R7$(2),t.SpI(" ",r.horaActual," "),t.R7$(17),t.Y8G("idUsuario",r.idUsuario))},dependencies:[u.MD,p.Hu,l.Hl,l.$z,m.m_,m.An,v.iI,v.Wk,a.i,z,W,J,it],styles:['@charset "UTF-8";.dashboard-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto;background-color:#f5f5f5;min-height:calc(100vh - 64px)}.welcome-section[_ngcontent-%COMP%]{margin-bottom:24px}.welcome-section[_ngcontent-%COMP%]   .welcome-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:16px;box-shadow:0 8px 32px #667eea4d}.welcome-section[_ngcontent-%COMP%]   .welcome-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:32px}.welcome-section[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:24px}.welcome-section[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{flex:1}.welcome-section[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;margin:0 0 8px;text-shadow:0 2px 4px rgba(0,0,0,.2)}.welcome-section[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0 0 12px;font-weight:300}.welcome-section[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   .welcome-description[_ngcontent-%COMP%]{font-size:1rem;opacity:.8;margin:0;line-height:1.4}.welcome-section[_ngcontent-%COMP%]   .welcome-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.welcome-section[_ngcontent-%COMP%]   .welcome-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:160px;height:44px;font-weight:500}.welcome-section[_ngcontent-%COMP%]   .welcome-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background:#fff;color:#667eea}.welcome-section[_ngcontent-%COMP%]   .welcome-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{background:#ffffffe6}.welcome-section[_ngcontent-%COMP%]   .welcome-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.stats-section[_ngcontent-%COMP%]{margin-bottom:24px}.main-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;gap:24px;margin-bottom:24px}.activity-section[_ngcontent-%COMP%]{margin-bottom:24px}.activity-section[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a}@media (max-width: 1200px){.main-content[_ngcontent-%COMP%]{grid-template-columns:1fr 350px;gap:20px}}@media (max-width: 968px){.main-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.dashboard-container[_ngcontent-%COMP%]{padding:16px}.welcome-section[_ngcontent-%COMP%]   .welcome-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:24px}.welcome-section[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.welcome-section[_ngcontent-%COMP%]   .welcome-actions[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}}@media (max-width: 600px){.dashboard-container[_ngcontent-%COMP%]{padding:12px}.welcome-section[_ngcontent-%COMP%]   .welcome-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:20px}.welcome-section[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:1.75rem}.welcome-section[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{font-size:.875rem}.welcome-section[_ngcontent-%COMP%]   .welcome-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}.welcome-section[_ngcontent-%COMP%]   .welcome-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.dashboard-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@media (prefers-color-scheme: dark){.dashboard-container[_ngcontent-%COMP%]{background-color:#121212}}[_nghost-%COMP%]{contain:layout style paint;display:block}.dashboard-container[_ngcontent-%COMP%], .stats-container[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%], .timeline-list[_ngcontent-%COMP%]{transform:translateZ(0);will-change:transform}mat-card[_ngcontent-%COMP%]{backface-visibility:hidden}.dashboard-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}'],changeDetection:0})}return e})()}}]);