"use strict";(self.webpackChunkdividi_facil_front_end=self.webpackChunkdividi_facil_front_end||[]).push([[272],{8272:(M,g,n)=>{n.r(g),n.d(g,{GastosTestComponent:()=>D});var c=n(2200),r=n(5596),l=n(8834),h=n(9183),m=n(2021),e=n(3664),f=n(948);function v(a,d){if(1&a&&(e.j41(0,"div",8)(1,"strong"),e.EFF(2),e.k0s(),e.EFF(3),e.nI1(4,"date"),e.k0s()),2&a){const t=d.$implicit;e.R7$(2),e.JRh(t.descripcion),e.R7$(),e.E5c(" - $",t.monto," - ",t.nombreGrupo," - ",e.i5U(4,4,t.fechaGasto,"short")," ")}}function R(a,d){if(1&a&&(e.j41(0,"div",6)(1,"h4"),e.EFF(2),e.k0s(),e.DNE(3,v,5,7,"div",7),e.k0s()),2&a){const t=e.XpG();e.R7$(2),e.SpI("\u2705 Gastos encontrados: ",t.gastosRecientes.length),e.R7$(),e.Y8G("ngForOf",t.gastosRecientes)}}function E(a,d){if(1&a&&(e.j41(0,"div",10)(1,"strong"),e.EFF(2),e.k0s(),e.EFF(3),e.j41(4,"span"),e.EFF(5),e.k0s()()),2&a){const t=d.$implicit;e.R7$(2),e.JRh(t.nombreUsuario),e.R7$(),e.SpI(" - Saldo: $",t.saldo," "),e.R7$(),e.HbH(t.saldo>=0?"positive":"negative"),e.R7$(),e.SpI(" ",t.saldo>=0?"(Le deben)":"(Debe)"," ")}}function u(a,d){if(1&a&&(e.j41(0,"div",6)(1,"h4"),e.EFF(2),e.k0s(),e.DNE(3,E,6,5,"div",9),e.k0s()),2&a){const t=e.XpG();e.R7$(2),e.SpI("\u2705 Saldos encontrados: ",t.saldos.length),e.R7$(),e.Y8G("ngForOf",t.saldos)}}function b(a,d){if(1&a&&(e.j41(0,"div",11)(1,"h3"),e.EFF(2,"\u{1f4ca} \xdaltimo Resultado"),e.k0s(),e.j41(3,"pre"),e.EFF(4),e.nI1(5,"json"),e.k0s()()),2&a){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,1,t.testResult))}}let D=(()=>{class a{gastoService;gastosRecientes=[];saldos=[];loading=!1;testResult=null;constructor(t){this.gastoService=t}ngOnInit(){this.probarGastosRecientes()}probarGastosRecientes(){this.loading=!0,this.testResult=null,this.gastoService.obtenerRecientes(5).subscribe({next:t=>{this.gastosRecientes=t.data??[],this.testResult={success:!0,operation:"obtenerRecientes",count:this.gastosRecientes.length,data:t,timestamp:(new Date).toISOString()},this.loading=!1,console.log("\u2705 Gastos recientes:",this.gastosRecientes)},error:t=>{this.testResult={success:!1,operation:"obtenerRecientes",error:t,timestamp:(new Date).toISOString()},this.loading=!1,console.error("\u274c Error:",t)}})}probarSaldos(){this.loading=!0,this.testResult=null,this.gastoService.obtenerSaldosUsuario().subscribe({next:t=>{this.saldos=t.data||[],this.testResult={success:!0,operation:"obtenerSaldosUsuario",count:this.saldos.length,data:t,timestamp:(new Date).toISOString()},this.loading=!1,console.log("\u2705 Saldos:",this.saldos)},error:t=>{this.testResult={success:!1,operation:"obtenerSaldosUsuario",error:t,timestamp:(new Date).toISOString()},this.loading=!1,console.error("\u274c Error:",t)}})}crearGastoDePrueba(){this.loading=!0,this.testResult=null;const t=JSON.parse(localStorage.getItem("usuario")||"{}"),s={idGrupo:"ID_GRUPO_PRUEBA",monto:100,descripcion:"Gasto de prueba",categoria:"Test",fechaGasto:(new Date).toISOString(),detalles:[{idMiembroDeudor:t.idUsuario,monto:100}]};this.gastoService.crearGasto(s).subscribe({next:i=>{this.testResult={success:i.exito,operation:"crearGasto",response:i,timestamp:(new Date).toISOString()},this.loading=!1,console.log("\u2705 Gasto creado:",i),i.exito&&this.probarGastosRecientes()},error:i=>{this.testResult={success:!1,operation:"crearGasto",error:i,timestamp:(new Date).toISOString()},this.loading=!1,console.error("\u274c Error:",i)}})}static \u0275fac=function(p){return new(p||a)(e.rXU(f.Y))};static \u0275cmp=e.VBU({type:a,selectors:[["app-gastos-test"]],decls:23,vars:7,consts:[[1,"test-container"],[1,"test-section"],["mat-raised-button","","color","primary",3,"click","disabled"],["class","result",4,"ngIf"],["mat-raised-button","","color","accent",3,"click","disabled"],["class","results",4,"ngIf"],[1,"result"],["class","gasto-item",4,"ngFor","ngForOf"],[1,"gasto-item"],["class","saldo-item",4,"ngFor","ngForOf"],[1,"saldo-item"],[1,"results"]],template:function(p,s){1&p&&(e.j41(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4,"\u{1f9ea} Pruebas de Gastos"),e.k0s()(),e.j41(5,"mat-card-content")(6,"mat-expansion-panel")(7,"mat-expansion-panel-header")(8,"mat-panel-title"),e.EFF(9,"\u{1f4cb} Obtener Gastos Recientes"),e.k0s()(),e.j41(10,"div",1)(11,"button",2),e.bIt("click",function(){return s.probarGastosRecientes()}),e.EFF(12),e.k0s(),e.DNE(13,R,4,2,"div",3),e.k0s()(),e.j41(14,"mat-expansion-panel")(15,"mat-expansion-panel-header")(16,"mat-panel-title"),e.EFF(17,"\u{1f4b0} Obtener Saldos"),e.k0s()(),e.j41(18,"div",1)(19,"button",4),e.bIt("click",function(){return s.probarSaldos()}),e.EFF(20),e.k0s(),e.DNE(21,u,4,2,"div",3),e.k0s()(),e.DNE(22,b,6,3,"div",5),e.k0s()()()),2&p&&(e.R7$(11),e.Y8G("disabled",s.loading),e.R7$(),e.SpI(" ",s.loading?"Cargando...":"Probar Gastos Recientes"," "),e.R7$(),e.Y8G("ngIf",s.gastosRecientes.length>0),e.R7$(6),e.Y8G("disabled",s.loading),e.R7$(),e.SpI(" ",s.loading?"Cargando...":"Probar Saldos"," "),e.R7$(),e.Y8G("ngIf",s.saldos.length>0),e.R7$(),e.Y8G("ngIf",s.testResult))},dependencies:[c.MD,c.Sq,c.bT,c.TG,c.vh,r.Hu,r.RN,r.m2,r.MM,r.dh,l.Hl,l.$z,h.D6,m.MY,m.GK,m.Z2,m.WN],styles:[".test-container[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto;padding:1rem}.test-section[_ngcontent-%COMP%]{margin:1rem 0;padding:1rem}.result[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background:#f0f8ff;border-radius:4px}.gasto-item[_ngcontent-%COMP%], .saldo-item[_ngcontent-%COMP%]{padding:.5rem;border-bottom:1px solid #eee}.results[_ngcontent-%COMP%]{margin-top:2rem;padding:1rem;background:#f5f5f5;border-radius:8px}.positive[_ngcontent-%COMP%]{color:green}.negative[_ngcontent-%COMP%]{color:red}pre[_ngcontent-%COMP%]{font-size:12px;overflow-x:auto;max-height:300px}mat-expansion-panel[_ngcontent-%COMP%]{margin:1rem 0}"]})}return a})()},9183:(M,g,n)=>{n.d(g,{D6:()=>d,LG:()=>D});var c=n(8728),r=n(3664),l=n(7705),h=n(2200),m=n(6609),e=n(1715);const f=["determinateSpinner"];function v(t,p){if(1&t&&(c.qSk(),r.j41(0,"svg",11),r.nrm(1,"circle",12),r.k0s()),2&t){const s=r.XpG();r.BMQ("viewBox",s._viewBox()),r.R7$(),r.xc7("stroke-dasharray",s._strokeCircumference(),"px")("stroke-dashoffset",s._strokeCircumference()/2,"px")("stroke-width",s._circleStrokeWidth(),"%"),r.BMQ("r",s._circleRadius())}}const R=new c.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function E(){return{diameter:u}}}),u=100;let D=(()=>{class t{_elementRef=(0,c.WQX)(r.aKT);_noopAnimations;get color(){return this._color||this._defaultColor}set color(s){this._color=s}_color;_defaultColor="primary";_determinateCircle;constructor(){const s=(0,c.WQX)(R);this._noopAnimations=(0,m._)()&&!!s&&!s._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",s&&(s.color&&(this.color=this._defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(s){this._value=Math.max(0,Math.min(100,s||0))}_value=0;get diameter(){return this._diameter}set diameter(s){this._diameter=s||0}_diameter=u;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(s){this._strokeWidth=s||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const s=2*this._circleRadius()+this.strokeWidth;return`0 0 ${s} ${s}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=r.VBU({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,o){if(1&i&&r.GBs(f,5),2&i){let _;r.mGM(_=r.lsd())&&(o._determinateCircle=_.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,o){2&i&&(r.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===o.mode?o.value:null)("mode",o.mode),r.HbH("mat-"+o.color),r.xc7("width",o.diameter,"px")("height",o.diameter,"px")("--mat-progress-spinner-size",o.diameter+"px")("--mat-progress-spinner-active-indicator-width",o.diameter+"px"),r.AVh("_mat-animation-noopable",o._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===o.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",l.Udg],diameter:[2,"diameter","diameter",l.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",l.Udg]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,o){if(1&i&&(r.DNE(0,v,2,8,"ng-template",null,0,r.C5r),r.j41(2,"div",2,1),c.qSk(),r.j41(4,"svg",3),r.nrm(5,"circle",4),r.k0s()(),c.joV(),r.j41(6,"div",5)(7,"div",6)(8,"div",7),r.eu8(9,8),r.k0s(),r.j41(10,"div",9),r.eu8(11,8),r.k0s(),r.j41(12,"div",10),r.eu8(13,8),r.k0s()()()),2&i){const _=r.sdS(1);r.R7$(4),r.BMQ("viewBox",o._viewBox()),r.R7$(),r.xc7("stroke-dasharray",o._strokeCircumference(),"px")("stroke-dashoffset",o._strokeDashOffset(),"px")("stroke-width",o._circleStrokeWidth(),"%"),r.BMQ("r",o._circleRadius()),r.R7$(4),r.Y8G("ngTemplateOutlet",_),r.R7$(2),r.Y8G("ngTemplateOutlet",_),r.R7$(2),r.Y8G("ngTemplateOutlet",_)}},dependencies:[h.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}\n"],encapsulation:2,changeDetection:0})}return t})(),d=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=r.$C({type:t});static \u0275inj=c.G2t({imports:[e.M]})}return t})()}}]);