"use strict";(self.webpackChunkdividi_facil_front_end=self.webpackChunkdividi_facil_front_end||[]).push([[431],{6431:(A,g,r)=>{r.r(g),r.d(g,{PerfilComponent:()=>T});var _=r(2200),u=r(1413),P=r(6977),l=r(5596),d=r(8834),p=r(1074),C=r(1997),M=r(9183),m=r(5416),f=r(6471),O=r(8776),h=r(9947),E=r(4333),t=r(3664),i=r(8728),F=r(7545),v=r(3032),x=r(1782),b=r(9010);function k(e,s){1&e&&(t.qex(0),t.nrm(1,"app-loading-spinner",8),t.bVm())}function j(e,s){if(1&e){const n=t.RV6();t.j41(0,"img",40),t.bIt("error",function(o){i.eBV(n);const c=t.XpG(3);return i.Njj(c.onImageError(o))}),t.k0s()}if(2&e){const n=t.XpG(3);t.Y8G("src",n.usuario.urlImagen,t.B4B)("alt",n.usuario.nombre)}}function R(e,s){if(1&e&&(t.j41(0,"span",41),t.EFF(1),t.k0s()),2&e){const n=t.XpG(3);t.R7$(),t.SpI(" ",n.obtenerIniciales()," ")}}function y(e,s){if(1&e&&(t.j41(0,"div",22)(1,"mat-icon"),t.EFF(2,"phone"),t.k0s(),t.j41(3,"div",23)(4,"span",24),t.EFF(5,"Tel\xe9fono"),t.k0s(),t.j41(6,"span",25),t.EFF(7),t.k0s()()()),2&e){const n=t.XpG(3);t.R7$(7),t.JRh(n.usuario.telefono)}}function I(e,s){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"div",9)(2,"div",10)(3,"div",11),t.DNE(4,j,1,2,"img",12)(5,R,2,1,"span",13),t.k0s(),t.j41(6,"button",14),t.bIt("click",function(){i.eBV(n);const o=t.XpG(2);return i.Njj(o.editarPerfil())}),t.j41(7,"mat-icon"),t.EFF(8,"photo_camera"),t.k0s()()(),t.j41(9,"div",15)(10,"h2"),t.EFF(11),t.k0s(),t.j41(12,"p"),t.EFF(13),t.k0s(),t.j41(14,"div",16)(15,"mat-chip",17),t.EFF(16),t.k0s(),t.j41(17,"span",18)(18,"mat-icon"),t.EFF(19,"schedule"),t.k0s(),t.EFF(20),t.nI1(21,"dateFormat"),t.k0s()()()(),t.j41(22,"div",19)(23,"mat-card",20)(24,"mat-card-header")(25,"mat-card-title")(26,"mat-icon"),t.EFF(27,"person"),t.k0s(),t.EFF(28," Datos Personales "),t.k0s()(),t.j41(29,"mat-card-content")(30,"div",21)(31,"div",22)(32,"mat-icon"),t.EFF(33,"email"),t.k0s(),t.j41(34,"div",23)(35,"span",24),t.EFF(36,"Email"),t.k0s(),t.j41(37,"span",25),t.EFF(38),t.k0s()()(),t.DNE(39,y,8,1,"div",26),t.j41(40,"div",22)(41,"mat-icon"),t.EFF(42,"today"),t.k0s(),t.j41(43,"div",23)(44,"span",24),t.EFF(45,"Fecha de Registro"),t.k0s(),t.j41(46,"span",25),t.EFF(47),t.nI1(48,"dateFormat"),t.k0s()()(),t.j41(49,"div",22)(50,"mat-icon"),t.EFF(51,"verified_user"),t.k0s(),t.j41(52,"div",23)(53,"span",24),t.EFF(54,"Estado"),t.k0s(),t.j41(55,"span",25),t.EFF(56),t.k0s()()()()()(),t.j41(57,"mat-card",27)(58,"mat-card-header")(59,"mat-card-title")(60,"mat-icon"),t.EFF(61,"analytics"),t.k0s(),t.EFF(62," Estad\xedsticas "),t.k0s()(),t.j41(63,"mat-card-content")(64,"div",28)(65,"div",29)(66,"mat-icon",30),t.EFF(67,"group"),t.k0s(),t.j41(68,"div",31)(69,"span",32),t.EFF(70),t.k0s(),t.j41(71,"span",33),t.EFF(72,"Grupos Activos"),t.k0s()()(),t.j41(73,"div",29)(74,"mat-icon",34),t.EFF(75,"receipt"),t.k0s(),t.j41(76,"div",31)(77,"span",32),t.EFF(78),t.k0s(),t.j41(79,"span",33),t.EFF(80,"Gastos Registrados"),t.k0s()()(),t.j41(81,"div",29)(82,"mat-icon",35),t.EFF(83,"schedule"),t.k0s(),t.j41(84,"div",31)(85,"span",32),t.EFF(86),t.k0s(),t.j41(87,"span",33),t.EFF(88,"D\xedas Registrado"),t.k0s()()()()()()(),t.j41(89,"div",36)(90,"button",37),t.bIt("click",function(){i.eBV(n);const o=t.XpG(2);return i.Njj(o.editarPerfil())}),t.j41(91,"mat-icon"),t.EFF(92,"edit"),t.k0s(),t.EFF(93," Editar Informaci\xf3n "),t.k0s(),t.j41(94,"button",38)(95,"mat-icon"),t.EFF(96,"notifications"),t.k0s(),t.EFF(97," Configurar Notificaciones "),t.k0s(),t.j41(98,"button",39),t.bIt("click",function(){i.eBV(n);const o=t.XpG(2);return i.Njj(o.cerrarSesion())}),t.j41(99,"mat-icon"),t.EFF(100,"logout"),t.k0s(),t.EFF(101," Cerrar Sesi\xf3n "),t.k0s()(),t.bVm()}if(2&e){const n=t.XpG(2);t.R7$(3),t.AVh("with-image",n.usuario.urlImagen),t.R7$(),t.Y8G("ngIf",n.usuario.urlImagen),t.R7$(),t.Y8G("ngIf",!n.usuario.urlImagen),t.R7$(6),t.JRh(n.usuario.nombre),t.R7$(2),t.JRh(n.usuario.email),t.R7$(2),t.Y8G("color",n.obtenerEstadoUsuario().color),t.R7$(),t.SpI(" ",n.obtenerEstadoUsuario().texto," "),t.R7$(4),t.SpI(" Registrado el ",t.bMT(21,16,n.usuario.fechaRegistro)," "),t.R7$(18),t.JRh(n.usuario.email),t.R7$(),t.Y8G("ngIf",n.usuario.telefono),t.R7$(8),t.JRh(t.bMT(48,18,n.usuario.fechaRegistro)),t.R7$(9),t.JRh(n.obtenerEstadoUsuario().texto),t.R7$(14),t.JRh(n.estadisticasUsuario.gruposActivos),t.R7$(8),t.JRh(n.estadisticasUsuario.gastosRegistrados),t.R7$(8),t.JRh(n.estadisticasUsuario.diasRegistrado)}}function D(e,s){1&e&&(t.j41(0,"div",42)(1,"mat-icon"),t.EFF(2,"person_off"),t.k0s(),t.j41(3,"h2"),t.EFF(4,"No se encontr\xf3 el perfil"),t.k0s()())}function U(e,s){if(1&e&&t.DNE(0,I,102,20,"ng-container",7)(1,D,5,0,"ng-template",null,1,t.C5r),2&e){const n=t.sdS(2),a=t.XpG();t.Y8G("ngIf",a.usuario)("ngIfElse",n)}}let T=(()=>{class e{authService;usuarioService;router;snackBar;destroy$=new u.B;loading=!1;usuario=null;estadisticasUsuario={gruposActivos:0,gastosRegistrados:0,totalGastado:0,diasRegistrado:0};constructor(n,a,o,c){this.authService=n,this.usuarioService=a,this.router=o,this.snackBar=c}ngOnInit(){this.cargarDatosUsuario()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarDatosUsuario(){this.loading=!0;const n=this.authService.obtenerUsuario();n?.idUsuario?this.usuarioService.obtenerUsuario(n.idUsuario).pipe((0,P.Q)(this.destroy$)).subscribe({next:a=>{this.loading=!1,a.exito&&a.data?(this.usuario=a.data,this.calcularEstadisticas()):this.snackBar.open(a.mensaje||"Error al cargar perfil","Cerrar",{duration:3e3})},error:a=>{this.loading=!1,console.error("Error al cargar usuario:",a),this.snackBar.open("Error al cargar perfil","Cerrar",{duration:3e3})}}):this.router.navigate(["/auth/login"])}calcularEstadisticas(){if(!this.usuario)return;const n=new Date(this.usuario.fechaRegistro),o=Math.abs((new Date).getTime()-n.getTime());this.estadisticasUsuario.diasRegistrado=Math.ceil(o/864e5)}editarPerfil(){this.router.navigate(["/perfil/editar"])}recargar(){this.cargarDatosUsuario()}cerrarSesion(){this.authService.logout().subscribe({next:()=>{this.router.navigate(["/auth/login"])},error:()=>{localStorage.clear(),this.router.navigate(["/auth/login"])}})}obtenerIniciales(){if(!this.usuario?.nombre)return"U";const n=this.usuario.nombre.split(" ");return n.length>=2?(n[0][0]+n[1][0]).toUpperCase():n[0][0].toUpperCase()}obtenerEstadoUsuario(){return{texto:"Registrado",color:"primary"}}onImageError(n){const a=n.target;a&&(a.style.display="none")}static \u0275fac=function(a){return new(a||e)(t.rXU(F.u),t.rXU(v.o),t.rXU(x.Ix),t.rXU(m.UG))};static \u0275cmp=t.VBU({type:e,selectors:[["app-perfil"]],decls:19,vars:4,consts:[["perfilContent",""],["emptyState",""],[1,"perfil-container"],["card-header",""],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],["card-content",""],[4,"ngIf","ngIfElse"],["text","Cargando perfil..."],[1,"perfil-header"],[1,"avatar-section"],[1,"avatar"],["loading","lazy",3,"src","alt","error",4,"ngIf"],["class","avatar-iniciales",4,"ngIf"],["mat-icon-button","","title","Cambiar foto",1,"avatar-edit-btn",3,"click"],[1,"info-section"],[1,"usuario-meta"],[3,"color"],[1,"fecha-registro"],[1,"perfil-details"],[1,"datos-card"],[1,"datos-grid"],[1,"dato-item"],[1,"dato-content"],[1,"dato-label"],[1,"dato-value"],["class","dato-item",4,"ngIf"],[1,"estadisticas-card"],[1,"stats-grid"],[1,"stat-item"],["color","primary"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],["color","accent"],["color","warn"],[1,"acciones-grid"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","","color","primary","routerLink","/notificaciones"],["mat-stroked-button","","color","warn",3,"click"],["loading","lazy",3,"error","src","alt"],[1,"avatar-iniciales"],[1,"empty-state"]],template:function(a,o){if(1&a){const c=t.RV6();t.j41(0,"div",2)(1,"app-card"),t.qex(2,3),t.j41(3,"mat-icon"),t.EFF(4,"account_circle"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Mi Perfil"),t.k0s(),t.j41(7,"button",4),t.bIt("click",function(){return i.eBV(c),i.Njj(o.recargar())}),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s(),t.EFF(10," Actualizar "),t.k0s(),t.j41(11,"button",5),t.bIt("click",function(){return i.eBV(c),i.Njj(o.editarPerfil())}),t.j41(12,"mat-icon"),t.EFF(13,"edit"),t.k0s(),t.EFF(14," Editar Perfil "),t.k0s(),t.bVm(),t.qex(15,6),t.DNE(16,k,2,0,"ng-container",7)(17,U,3,2,"ng-template",null,0,t.C5r),t.bVm(),t.k0s()()}if(2&a){const c=t.sdS(18);t.R7$(7),t.Y8G("disabled",o.loading),t.R7$(4),t.Y8G("disabled",o.loading),t.R7$(5),t.Y8G("ngIf",o.loading)("ngIfElse",c)}},dependencies:[_.MD,_.bT,l.Hu,l.RN,l.m2,l.MM,l.dh,d.Hl,d.$z,b.M,p.m_,p.An,C.w,M.D6,m._T,f.YN,f.Jl,O.a,h.i,E.N],styles:['@charset "UTF-8";.perfil-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:1rem}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0;color:#333}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:3rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.perfil-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.perfil-principal-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]{position:relative;flex-shrink:0}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#fff3;border:4px solid rgba(255,255,255,.3);overflow:hidden}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#fff}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:#ffffffe6;color:#333;width:40px;height:40px}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-edit-btn[_ngcontent-%COMP%]:hover{background:#fff}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .perfil-info[_ngcontent-%COMP%]{flex:1}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .perfil-info[_ngcontent-%COMP%]   .nombre-usuario[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0 0 .5rem;text-shadow:0 2px 4px rgba(0,0,0,.2)}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .perfil-info[_ngcontent-%COMP%]   .email-usuario[_ngcontent-%COMP%]{font-size:1.1rem;margin:0 0 1rem;opacity:.9}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .perfil-info[_ngcontent-%COMP%]   .usuario-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;align-items:center}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .perfil-info[_ngcontent-%COMP%]   .usuario-meta[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3)}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]   .perfil-info[_ngcontent-%COMP%]   .usuario-meta[_ngcontent-%COMP%]   .fecha-registro[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem;opacity:.8}.perfil-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}.datos-card[_ngcontent-%COMP%]   .datos-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.datos-card[_ngcontent-%COMP%]   .datos-grid[_ngcontent-%COMP%]   .dato-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem;background:#f9f9f9;border-radius:8px}.datos-card[_ngcontent-%COMP%]   .datos-grid[_ngcontent-%COMP%]   .dato-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666;flex-shrink:0}.datos-card[_ngcontent-%COMP%]   .datos-grid[_ngcontent-%COMP%]   .dato-item[_ngcontent-%COMP%]   .dato-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.datos-card[_ngcontent-%COMP%]   .datos-grid[_ngcontent-%COMP%]   .dato-item[_ngcontent-%COMP%]   .dato-content[_ngcontent-%COMP%]   .dato-label[_ngcontent-%COMP%]{font-size:.8rem;color:#666;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.datos-card[_ngcontent-%COMP%]   .datos-grid[_ngcontent-%COMP%]   .dato-item[_ngcontent-%COMP%]   .dato-content[_ngcontent-%COMP%]   .dato-value[_ngcontent-%COMP%]{font-size:1rem;color:#333;font-weight:500}.estadisticas-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.estadisticas-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:#f9f9f9;border-radius:8px}.estadisticas-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem}.estadisticas-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.estadisticas-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.estadisticas-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.acciones-card[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.acciones-card[_ngcontent-%COMP%]   .acciones-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px;display:flex;align-items:center;justify-content:center;gap:.5rem}.error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:3rem;text-align:center;gap:1rem}.error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem}.error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}@media (max-width: 768px){.perfil-container[_ngcontent-%COMP%]{padding:.5rem}.header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.header-section[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{justify-content:center}.perfil-principal-card[_ngcontent-%COMP%]   .perfil-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:1.5rem}.perfil-details[_ngcontent-%COMP%], .acciones-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 480px){.usuario-meta[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.stats-grid[_ngcontent-%COMP%], .datos-grid[_ngcontent-%COMP%]{gap:.75rem}}[_nghost-%COMP%]{contain:layout style paint;display:block}.dashboard-container[_ngcontent-%COMP%], .stats-container[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%], .timeline-list[_ngcontent-%COMP%]{transform:translateZ(0);will-change:transform}mat-card[_ngcontent-%COMP%]{backface-visibility:hidden}.dashboard-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}']})}return e})()}}]);