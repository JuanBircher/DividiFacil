"use strict";(self.webpackChunkdividi_facil_front_end=self.webpackChunkdividi_facil_front_end||[]).push([[957],{3817:(C,_,t)=>{t.d(_,{b:()=>E});var u=t(9330),i=t(7673),l=t(9437),h=t(6354),f=t(5312),m=t(8728);let E=(()=>{class p{http;apiUrl=`${f.c.apiUrl}/api/grupos`;constructor(o){this.http=o}crearGrupo(o){return console.log("[GrupoService] crearGrupo",{grupoCreacion:o}),this.http.post(this.apiUrl,o).pipe((0,l.W)(e=>(console.error("Error creando grupo:",e),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al crear grupo"}))))}obtenerGrupo(o){return console.log("[GrupoService] obtenerGrupo",{idGrupo:o}),this.http.get(`${this.apiUrl}/${o}`).pipe((0,l.W)(e=>(console.error("Error obteniendo grupo:",e),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al obtener grupo"}))))}obtenerGrupoPorId(o){return console.log("[GrupoService] obtenerGrupoPorId",{idGrupo:o}),this.obtenerGrupo(o)}obtenerGrupoConMiembros(o){return console.log("[GrupoService] obtenerGrupoConMiembros",{idGrupo:o}),this.http.get(`${this.apiUrl}/${o}/con-miembros`).pipe((0,l.W)(e=>(console.error("Error obteniendo grupo con miembros:",e),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al obtener grupo con miembros"}))))}obtenerGrupos(){return console.log("[GrupoService] obtenerGrupos"),this.http.get(this.apiUrl).pipe((0,h.T)(o=>({exito:o.exito,data:o.data??[],mensaje:o.mensaje})),(0,l.W)(o=>(console.error("Error obteniendo grupos:",o),(0,i.of)({exito:!1,data:[],mensaje:"Error al obtener grupos"}))))}obtenerGrupoPorCodigo(o){return console.log("[GrupoService] obtenerGrupoPorCodigo",{codigo:o}),this.http.get(`${this.apiUrl}/codigo/${o}`).pipe((0,l.W)(e=>(console.error("Error obteniendo grupo por c\xf3digo:",e),(0,i.of)({exito:!1,data:void 0,mensaje:"C\xf3digo de acceso inv\xe1lido"}))))}agregarMiembro(o,e){return console.log("[GrupoService] agregarMiembro",{idGrupo:o,invitacion:e}),this.http.post(`${this.apiUrl}/${o}/miembros`,e).pipe((0,l.W)(s=>(console.error("Error agregando miembro:",s),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al agregar miembro"}))))}eliminarMiembro(o,e){return console.log("[GrupoService] eliminarMiembro",{idGrupo:o,idMiembro:e}),this.http.delete(`${this.apiUrl}/${o}/miembros/${e}`).pipe((0,l.W)(s=>(console.error("Error eliminando miembro:",s),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al eliminar miembro"}))))}cambiarRolMiembro(o,e,s){return console.log("[GrupoService] cambiarRolMiembro",{idGrupo:o,idMiembro:e,nuevoRol:s}),this.http.put(`${this.apiUrl}/${o}/miembros/${e}/rol`,{nuevoRol:s}).pipe((0,l.W)(M=>(console.error("Error cambiando rol:",M),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al cambiar rol"}))))}generarCodigoAcceso(o){return console.log("[GrupoService] generarCodigoAcceso",{idGrupo:o}),this.http.post(`${this.apiUrl}/${o}/codigo-acceso`,{}).pipe((0,l.W)(e=>(console.error("Error generando c\xf3digo:",e),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al generar c\xf3digo de acceso"}))))}actualizarGrupo(o,e){return console.log("[GrupoService] actualizarGrupo",{idGrupo:o,grupoActualizacion:e}),this.http.put(`${this.apiUrl}/${o}`,e).pipe((0,l.W)(s=>(console.error("Error actualizando grupo:",s),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al actualizar grupo"}))))}eliminarGrupo(o){return console.log("[GrupoService] eliminarGrupo",{idGrupo:o}),this.http.delete(`${this.apiUrl}/${o}`).pipe((0,l.W)(e=>(console.error("Error eliminando grupo:",e),(0,i.of)({exito:!1,data:void 0,mensaje:"Error al eliminar grupo"}))))}unirseConCodigo(o){return console.log("[GrupoService] unirseConCodigo",{codigo:o}),this.obtenerGrupoPorCodigo(o)}obtenerMiembros(o){return console.log("[GrupoService] obtenerMiembros",{idGrupo:o}),this.obtenerGrupoConMiembros(o)}obtenerGruposPaginados(o=1,e=10){console.log("[GrupoService] obtenerGruposPaginados",{pagina:o,limite:e});const s=(new u.Nl).set("pagina",o.toString()).set("limite",e.toString());return this.http.get(this.apiUrl,{params:s}).pipe((0,l.W)(g=>(console.error("Error obteniendo grupos paginados:",g),(0,i.of)({exito:!1,data:[],totalRegistros:0,totalPaginas:0,paginaActual:1,registrosPorPagina:e,mensaje:"Error al obtener grupos"}))))}getGrupos(){return console.log("[GrupoService] getGrupos"),this.obtenerGrupos()}static \u0275fac=function(e){return new(e||p)(m.KVO(u.Qq))};static \u0275prov=m.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},4957:(C,_,t)=>{t.r(_),t.d(_,{ListadoGruposComponent:()=>T});var u=t(2200),i=t(8132),l=t(1413),h=t(6977),f=t(5596),m=t(3902),E=t(8834),p=t(1074),P=t(9183),o=t(6471),e=t(9115),s=t(3225),g=t(9947),M=t(4333),r=t(3664),O=t(7705),b=t(3817),v=t(9010);const D=a=>["/grupos/detalle",a];function G(a,d){1&a&&(r.qex(0),r.nrm(1,"app-loading-spinner",7),r.bVm())}function F(a,d){if(1&a&&(r.j41(0,"div",10)(1,"div",11)(2,"mat-icon"),r.EFF(3,"groups"),r.k0s()(),r.j41(4,"div",12)(5,"div",13),r.EFF(6),r.k0s(),r.j41(7,"div",14),r.EFF(8),r.k0s(),r.j41(9,"div",15)(10,"span",16),r.EFF(11),r.k0s(),r.j41(12,"span",17),r.EFF(13),r.nI1(14,"currency"),r.k0s(),r.j41(15,"span",18),r.EFF(16),r.k0s()()(),r.j41(17,"div",19)(18,"button",20)(19,"mat-icon"),r.EFF(20,"visibility"),r.k0s()()()()),2&a){const n=d.$implicit;r.R7$(6),r.JRh(n.nombreGrupo),r.R7$(2),r.JRh(n.descripcion||"Sin descripci\xf3n"),r.R7$(3),r.SpI("",n.cantidadMiembros," miembros"),r.R7$(2),r.JRh(r.ii3(14,6,n.totalGastos,"ARS","symbol","1.2-2")),r.R7$(3),r.SpI("por ",n.nombreCreador),r.R7$(2),r.Y8G("routerLink",r.eq3(11,D,n.idGrupo))}}function I(a,d){if(1&a&&(r.qex(0),r.j41(1,"div",8),r.DNE(2,F,21,13,"div",9),r.k0s(),r.bVm()),2&a){const n=r.XpG(2);r.R7$(2),r.Y8G("ngForOf",n.grupos)}}function R(a,d){1&a&&(r.j41(0,"div",21)(1,"mat-icon"),r.EFF(2,"group_add"),r.k0s(),r.j41(3,"h3"),r.EFF(4,"No tienes grupos a\xfan"),r.k0s(),r.j41(5,"p"),r.EFF(6,"Crea tu primer grupo para comenzar a dividir gastos"),r.k0s(),r.j41(7,"button",22)(8,"mat-icon"),r.EFF(9,"add"),r.k0s(),r.EFF(10," Crear Grupo "),r.k0s()())}function U(a,d){if(1&a&&r.DNE(0,I,3,1,"ng-container",6)(1,R,11,0,"ng-template",null,1,r.C5r),2&a){const n=r.sdS(2),c=r.XpG();r.Y8G("ngIf",c.grupos&&c.grupos.length>0)("ngIfElse",n)}}let T=(()=>{class a{grupoService;cdr;grupos=[];gruposFiltrados=[];cargando=!1;error=null;destroy$=new l.B;constructor(n,c){this.grupoService=n,this.cdr=c}ngOnInit(){this.cargarGrupos()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}cargarGrupos(){this.cargando=!0,this.error=null,this.cdr.markForCheck(),console.log("\u{1f504} Cargando grupos..."),this.grupoService.obtenerGrupos().pipe((0,h.Q)(this.destroy$)).subscribe({next:n=>{this.cargando=!1,n.exito&&n.data?(this.grupos=n.data,this.gruposFiltrados=[...this.grupos],this.aplicarFiltros()):(this.grupos=[],this.gruposFiltrados=[]),this.cdr.markForCheck()},error:n=>{this.cargando=!1,console.error("Error al cargar grupos:",n),this.cdr.markForCheck()}})}aplicarFiltros(){}obtenerColorModo(n){switch(n){case s.q.EQUITATIVO:return"primary";case s.q.PROPORCIONAL:return"accent";case s.q.ESTANDAR:return"warn";default:return"primary"}}obtenerIconoModo(n){switch(n){case s.q.EQUITATIVO:return"balance";case s.q.PROPORCIONAL:return"pie_chart";case s.q.ESTANDAR:return"timeline";default:return"group"}}trackByGrupoId=(n,c)=>c.idGrupo;refrescar(){this.cargarGrupos()}static \u0275fac=function(c){return new(c||a)(r.rXU(b.b),r.rXU(O.gRc))};static \u0275cmp=r.VBU({type:a,selectors:[["app-listado-grupos"]],decls:16,vars:2,consts:[["gruposContent",""],["emptyState",""],["card-header",""],[1,"subtitle"],["mat-raised-button","","color","primary","routerLink","/grupos/alta",1,"ml-auto"],["card-content",""],[4,"ngIf","ngIfElse"],["text","Cargando grupos..."],[1,"grupo-list"],["class","grupo-item",4,"ngFor","ngForOf"],[1,"grupo-item"],[1,"icon"],[1,"info"],[1,"nombre"],[1,"desc"],[1,"meta"],[1,"miembros"],[1,"gastos"],[1,"creador"],[1,"actions"],["mat-icon-button","","color","primary",3,"routerLink"],[1,"empty-state"],["mat-raised-button","","color","primary","routerLink","/grupos/alta"]],template:function(c,A){if(1&c&&(r.j41(0,"app-card"),r.qex(1,2),r.j41(2,"mat-icon"),r.EFF(3,"groups"),r.k0s(),r.j41(4,"span"),r.EFF(5,"Mis Grupos"),r.k0s(),r.j41(6,"span",3),r.EFF(7,"Administra tus grupos de gastos compartidos"),r.k0s(),r.j41(8,"button",4)(9,"mat-icon"),r.EFF(10,"add"),r.k0s(),r.EFF(11," Nuevo Grupo "),r.k0s(),r.bVm(),r.qex(12,5),r.DNE(13,G,2,0,"ng-container",6)(14,U,3,2,"ng-template",null,0,r.C5r),r.bVm(),r.k0s()),2&c){const L=r.sdS(15);r.R7$(13),r.Y8G("ngIf",A.cargando)("ngIfElse",L)}},dependencies:[u.MD,u.Sq,u.bT,u.oe,i.iI,i.Wk,f.Hu,m.Fg,E.Hl,E.$z,v.M,p.m_,p.An,P.D6,o.YN,e.Cn,g.i,M.N],styles:['@charset "UTF-8";mat-card[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto}.desc[_ngcontent-%COMP%]{font-size:.9rem;color:#666}mat-list-item[_ngcontent-%COMP%]{align-items:center}button[mat-icon-button][_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]{contain:layout style paint;display:block}.dashboard-container[_ngcontent-%COMP%], .stats-container[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%], .timeline-list[_ngcontent-%COMP%]{transform:translateZ(0);will-change:transform}mat-card[_ngcontent-%COMP%]{backface-visibility:hidden}.dashboard-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}'],changeDetection:0})}return a})()}}]);