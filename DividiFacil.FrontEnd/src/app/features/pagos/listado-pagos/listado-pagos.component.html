<div class="pagos-container">
  
  <!-- HEADER -->
  <app-card>
    <ng-container card-header>
      <mat-icon>payment</mat-icon>
      <span>{{ idGrupoFiltro ? 'Pagos del Grupo' : 'Mis Pagos' }}</span>
      <button mat-button (click)="recargar()" [disabled]="loading || procesando">
        <mat-icon>refresh</mat-icon>
        Actualizar
      </button>
      <button mat-raised-button color="primary" (click)="crearPago()">
        <mat-icon>add</mat-icon>
        Nuevo Pago
      </button>
    </ng-container>
    
    <!-- LOADING & CONTENIDO -->
    <ng-container card-content>
      <ng-container *ngIf="loading; else pagosContent">
        <app-loading-spinner text="Cargando pagos..."></app-loading-spinner>
      </ng-container>
      
      <ng-template #pagosContent>
        <ng-container *ngIf="todosLosPagos.length === 0; else listaPagos">
          <div class="empty-state">
            <mat-icon>payments</mat-icon>
            <h2>No hay pagos registrados</h2>
            <p>{{ idGrupoFiltro ? 'Este grupo no tiene pagos registrados aún' : 'No tienes pagos registrados aún' }}</p>
            <button mat-raised-button color="primary" (click)="crearPago()">
              <mat-icon>add</mat-icon>
              Crear Primer Pago
            </button>
          </div>
        </ng-container>
        
        <ng-template #listaPagos>
          <!-- Aquí va la lista/tablas de pagos migrada a la nueva estructura visual -->
          <div class="pagos-list">
            <!-- ...contenido de la lista de pagos... -->
          </div>
        </ng-template>
      </ng-template>
    </ng-container>
  </app-card>
</div>