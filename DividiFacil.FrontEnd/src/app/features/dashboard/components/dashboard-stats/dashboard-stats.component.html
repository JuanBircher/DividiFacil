<div class="stats-container">
  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-container">
    <app-card 
      title="Error" 
      icon="error" 
      iconColor="warn">
      <p>{{ error }}</p>
      <button mat-button color="primary" (click)="refrescar()">
        Intentar nuevamente
      </button>
    </app-card>
  </div>

  <!-- Stats Grid -->
  <div *ngIf="!error" class="stats-grid">
    <!-- Total Grupos -->
    <app-card
      title="Grupos Activos"
      subtitle="Total de grupos donde participas"
      icon="group"
      iconColor="primary"
      [value]="stats.totalGrupos"
      [loading]="loading"
      [clickable]="true">
    </app-card>

    <!-- Gastos del Mes -->
    <app-card
      title="Gastos del Mes"
      subtitle="Total gastado este mes"
      icon="receipt"
      iconColor="warn"
      [value]="loading ? undefined : (stats.gastosDelMes | currencyFormat)"
      [loading]="loading"
      [clickable]="true">
    </app-card>

    <!-- Notificaciones -->
    <app-card
      title="Notificaciones"
      subtitle="Alertas pendientes"
      icon="notifications"
      iconColor="accent"
      [value]="stats.notificaciones"
      [loading]="loading"
      [clickable]="true">
    </app-card>

    <!-- Balance Total -->
    <app-card
      title="Balance Total"
      subtitle="Saldo en todas las cajas"
      icon="account_balance_wallet"
      iconColor="success"
      [value]="loading ? undefined : (stats.balanceTotal | currencyFormat)"
      [loading]="loading"
      [clickable]="true">
    </app-card>
  </div>
</div>