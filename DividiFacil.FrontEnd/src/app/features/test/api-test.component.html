<!-- src/app/features/test/api-test.component.html -->
<div class="api-test-container">
  <h2>ğŸ§ª Pruebas de API</h2>
  
  <div class="test-section">
    <h3>ğŸ”§ InformaciÃ³n del Sistema</h3>
    <p><strong>URL Base:</strong> {{ environment.apiUrl }}</p>
    <p><strong>Token presente:</strong> {{ !!getTokenInfo() ? 'âœ… SÃ­' : 'âŒ No' }}</p>
  </div>
  
  <div class="test-buttons">
    <button (click)="testAuthentication()" [disabled]="loading">
      ğŸ” Probar AutenticaciÃ³n
    </button>
    
    <button (click)="testGrupos()" [disabled]="loading">
      ğŸ‘¥ Probar Grupos
    </button>
    
    <button (click)="testGastos()" [disabled]="loading">
      ğŸ’° Probar Gastos
    </button>
    
    <button (click)="testPagos()" [disabled]="loading">
      ğŸ’³ Probar Pagos
    </button>
    
    <button (click)="testNotificaciones()" [disabled]="loading">
      ğŸ”” Probar Notificaciones
    </button>
    
    <button (click)="testAllEndpoints()" [disabled]="loading" class="test-all">
      ğŸš€ Probar Todos
    </button>
    
    <button (click)="testAllEndpointsAndNavigation()" [disabled]="loading" class="test-all">
      ğŸš€ Probar Endpoints + NavegaciÃ³n
    </button>
    
    <button (click)="clearResults()" [disabled]="loading" class="clear">
      ğŸ§¹ Limpiar
    </button>
  </div>
  
  <!-- Resultados -->
  <div class="results" *ngIf="authTestResult || gruposTestResult || gastosTestResult || pagosTestResult || notificacionesTestResult">
    
    <!-- Resultado AutenticaciÃ³n -->
    <div *ngIf="authTestResult" class="result-item" [class.success]="authTestResult.success" [class.error]="!authTestResult.success">
      <h4>ğŸ” AutenticaciÃ³n</h4>
      <pre>{{ authTestResult.data | json }}</pre>
    </div>
    
    <!-- Resultado Grupos -->
    <div *ngIf="gruposTestResult" class="result-item" [class.success]="gruposTestResult.success" [class.error]="!gruposTestResult.success">
      <h4>ğŸ‘¥ Grupos</h4>
      <pre>{{ gruposTestResult.data | json }}</pre>
    </div>
    
    <!-- Resultado Gastos -->
    <div *ngIf="gastosTestResult" class="result-item" [class.success]="gastosTestResult.success" [class.error]="!gastosTestResult.success">
      <h4>ğŸ’° Gastos</h4>
      <pre>{{ gastosTestResult.data | json }}</pre>
    </div>
    
    <!-- Resultado Pagos -->
    <div *ngIf="pagosTestResult" class="result-item" [class.success]="pagosTestResult.success" [class.error]="!pagosTestResult.success">
      <h4>ğŸ’³ Pagos</h4>
      <pre>{{ pagosTestResult.data | json }}</pre>
    </div>
    
    <!-- Resultado Notificaciones -->
    <div *ngIf="notificacionesTestResult" class="result-item" [class.success]="notificacionesTestResult.success" [class.error]="!notificacionesTestResult.success">
      <h4>ğŸ”” Notificaciones</h4>
      <pre>{{ notificacionesTestResult.data | json }}</pre>
    </div>
    
  </div>
  
  <!-- Reporte visual de resultados -->
  <div class="visual-report" *ngIf="authTestResult || gruposTestResult || gastosTestResult || pagosTestResult || notificacionesTestResult">
    <h3>ğŸ“Š Resumen Visual</h3>
    <div class="report-grid">
      <div class="report-item" [class.success]="authTestResult?.success" [class.error]="authTestResult && !authTestResult.success">
        <span>ğŸ” AutenticaciÃ³n</span>
        <span class="status">{{ authTestResult ? (authTestResult.success ? 'âœ… OK' : 'âŒ Error') : 'â³' }}</span>
      </div>
      <div class="report-item" [class.success]="gruposTestResult?.success" [class.error]="gruposTestResult && !gruposTestResult.success">
        <span>ğŸ‘¥ Grupos</span>
        <span class="status">{{ gruposTestResult ? (gruposTestResult.success ? 'âœ… OK' : 'âŒ Error') : 'â³' }}</span>
      </div>
      <div class="report-item" [class.success]="gastosTestResult?.success" [class.error]="gastosTestResult && !gastosTestResult.success">
        <span>ğŸ’° Gastos</span>
        <span class="status">{{ gastosTestResult ? (gastosTestResult.success ? 'âœ… OK' : 'âŒ Error') : 'â³' }}</span>
      </div>
      <div class="report-item" [class.success]="pagosTestResult?.success" [class.error]="pagosTestResult && !pagosTestResult.success">
        <span>ğŸ’³ Pagos</span>
        <span class="status">{{ pagosTestResult ? (pagosTestResult.success ? 'âœ… OK' : 'âŒ Error') : 'â³' }}</span>
      </div>
      <div class="report-item" [class.success]="notificacionesTestResult?.success" [class.error]="notificacionesTestResult && !notificacionesTestResult.success">
        <span>ğŸ”” Notificaciones</span>
        <span class="status">{{ notificacionesTestResult ? (notificacionesTestResult.success ? 'âœ… OK' : 'âŒ Error') : 'â³' }}</span>
      </div>
    </div>
  </div>
  
  <div *ngIf="loading" class="loading">
    â³ Cargando...
  </div>
</div>