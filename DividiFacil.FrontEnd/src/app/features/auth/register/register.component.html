<form [formGroup]="form" (ngSubmit)="onSubmit()" class="register-form" autocomplete="off">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Crear cuenta</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Nombre</mat-label>
        <input matInput formControlName="nombre" maxlength="100" autocomplete="name" />
        <mat-error *ngIf="form.get('nombre')?.hasError('required')">El nombre es obligatorio</mat-error>
        <mat-error *ngIf="form.get('nombre')?.hasError('maxlength')">Máximo 100 caracteres</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="email" autocomplete="email" />
        <mat-error *ngIf="form.get('email')?.hasError('required')">El email es obligatorio</mat-error>
        <mat-error *ngIf="form.get('email')?.hasError('email')">Formato de email inválido</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Contraseña</mat-label>
        <input matInput formControlName="password" type="password" autocomplete="new-password" />
        <mat-error *ngIf="form.get('password')?.hasError('required')">La contraseña es obligatoria</mat-error>
        <mat-error *ngIf="form.get('password')?.hasError('minlength')">Mínimo 6 caracteres</mat-error>
        <mat-error *ngIf="form.get('password')?.hasError('maxlength')">Máximo 50 caracteres</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Repetir contraseña</mat-label>
        <input matInput formControlName="confirmarPassword" type="password" autocomplete="new-password" />
        <mat-error *ngIf="form.get('confirmarPassword')?.hasError('required')">Repite la contraseña</mat-error>
        <mat-error *ngIf="form.hasError('passwordsMismatch')">Las contraseñas no coinciden</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Teléfono (opcional)</mat-label>
        <input matInput formControlName="telefono" type="tel" maxlength="20" autocomplete="tel" />
      </mat-form-field>

      <div *ngIf="error" class="error">{{ error }}</div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="primary" type="submit" [disabled]="loading || form.invalid">
        Crear cuenta
      </button>
      <mat-progress-spinner *ngIf="loading" diameter="20" mode="indeterminate"></mat-progress-spinner>
    </mat-card-actions>
    <div class="login-link">
      ¿Ya tienes cuenta?
      <a routerLink="/auth/login">Inicia sesión</a>
    </div>
  </mat-card>
</form>