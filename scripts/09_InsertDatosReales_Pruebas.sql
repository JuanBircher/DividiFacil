-- Script: 09_InsertDatosReales_Pruebas.sql
-- Descripción: Borra datos de tablas relacionadas y carga datos realistas y completos para pruebas funcionales.
-- NOTA: Conserva el usuario 'Juan Prueba' y elimina el resto de los usuarios.

-- 1. TRUNCATE/DELETE de tablas relacionadas (excepto Usuarios/Juan Prueba)
DELETE FROM DetallesGasto;
DELETE FROM Gastos;
DELETE FROM Pagos;
DELETE FROM Recordatorios;
DELETE FROM Notificaciones;
DELETE FROM MovimientosCaja;
DELETE FROM MiembrosGrupo;
DELETE FROM CajasComunes;
DELETE FROM Grupos;
DELETE FROM ConfiguracionesNotificaciones;

-- 2. Eliminar usuarios excepto Juan Prueba
DELETE FROM Usuarios WHERE IdUsuario <> '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA';

-- 3. Insertar usuarios adicionales
INSERT INTO Usuarios (IdUsuario, Nombre, Email, PasswordHash, ProveedorAuth, IdExterno, FechaRegistro, Activo, UrlImagen, TokenNotificacion, Telefono)
VALUES
('A1B2C3D4-E5F6-7890-1234-56789ABCDEF0', 'María López', 'maria.lopez@gmail.com', 'hash1', NULL, NULL, GETDATE(), 1, NULL, NULL, '3412345678'),
('B2C3D4E5-F6A1-8901-2345-6789ABCDEF01', 'Carlos Gómez', 'carlos.gomez@gmail.com', 'hash2', NULL, NULL, GETDATE(), 1, NULL, NULL, '3412345679'),
('C3D4E5F6-A1B2-9012-3456-789ABCDEF012', 'Lucía Fernández', 'lucia.fernandez@gmail.com', 'hash3', NULL, NULL, GETDATE(), 1, NULL, NULL, '3412345680'),
('D4E5F6A1-B2C3-0123-4567-89ABCDEF0123', 'Martín Pérez', 'martin.perez@gmail.com', 'hash4', NULL, NULL, GETDATE(), 1, NULL, NULL, '3412345681'),
('E5F6A1B2-C3D4-1234-5678-9ABCDEF01234', 'Sofía Ramírez', 'sofia.ramirez@gmail.com', 'hash5', NULL, NULL, GETDATE(), 1, NULL, NULL, '3412345682');

-- 4. Insertar grupos
INSERT INTO Grupos (IdGrupo, NombreGrupo, IdUsuarioCreador, FechaCreacion, Descripcion, ModoOperacion, CodigoAcceso)
VALUES
('11111111-1111-1111-1111-111111111111', 'Viaje a Bariloche', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', GETDATE(), 'Grupo para organizar el viaje a Bariloche', 'CajaComun', 'BARI25'),
('22222222-2222-2222-2222-222222222222', 'Cumpleaños Sofía', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', GETDATE(), 'Organización del cumpleaños de Sofía', 'CajaComun', 'SOFI25');

-- 5. Insertar miembros de grupo

-- GUIDs válidos para miembros
-- Grupo 1: Viaje a Bariloche
-- Juan Prueba
-- María López
-- Carlos Gómez
-- Grupo 2: Cumpleaños Sofía
-- Juan Prueba
-- Lucía Fernández
-- Martín Pérez

INSERT INTO MiembrosGrupo (IdMiembro, IdUsuario, IdGrupo, Rol, FechaUnion)
VALUES
('11111111-AAAA-1111-1111-111111111111', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', '11111111-1111-1111-1111-111111111111', 'Administrador', GETDATE()),
('11111111-BBBB-1111-1111-111111111111', 'A1B2C3D4-E5F6-7890-1234-56789ABCDEF0', '11111111-1111-1111-1111-111111111111', 'Miembro', GETDATE()),
('11111111-CCCC-1111-1111-111111111111', 'B2C3D4E5-F6A1-8901-2345-6789ABCDEF01', '11111111-1111-1111-1111-111111111111', 'Miembro', GETDATE()),
('22222222-AAAA-2222-2222-222222222222', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', '22222222-2222-2222-2222-222222222222', 'Administrador', GETDATE()),
('22222222-BBBB-2222-2222-222222222222', 'C3D4E5F6-A1B2-9012-3456-789ABCDEF012', '22222222-2222-2222-2222-222222222222', 'Miembro', GETDATE()),
('22222222-CCCC-2222-2222-222222222222', 'D4E5F6A1-B2C3-0123-4567-89ABCDEF0123', '22222222-2222-2222-2222-222222222222', 'Miembro', GETDATE());

-- 6. Insertar cajas comunes
-- GUIDs válidos para cajas
-- Caja del grupo Viaje a Bariloche
-- Caja del grupo Cumpleaños Sofía
INSERT INTO CajasComunes (IdCaja, IdGrupo, Saldo, FechaCreacion)
VALUES
('33333333-AAAA-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', 15000.00, GETDATE()),
('44444444-BBBB-4444-4444-444444444444', '22222222-2222-2222-2222-222222222222', 8000.00, GETDATE());

-- 7. Insertar gastos
-- GUIDs válidos para gastos
-- Gasto 1: Alquiler de cabaña
-- Gasto 2: Excursión al Cerro Catedral
-- Gasto 3: Decoración y torta
-- Gasto 4: Bebidas y snacks
INSERT INTO Gastos (IdGasto, IdGrupo, IdMiembroPagador, Monto, Descripcion, Categoria, FechaCreacion, FechaGasto, ComprobantePath, UsuarioIdUsuario)
VALUES
('66666666-AAAA-6666-6666-666666666666', '11111111-1111-1111-1111-111111111111', '11111111-AAAA-1111-1111-111111111111', 12000.00, 'Alquiler de cabaña', 'Alojamiento', GETDATE(), GETDATE(), NULL, '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA'),
('66666666-BBBB-6666-6666-666666666666', '11111111-1111-1111-1111-111111111111', '11111111-BBBB-1111-1111-111111111111', 3000.00, 'Excursión al Cerro Catedral', 'Excursiones', GETDATE(), GETDATE(), NULL, 'A1B2C3D4-E5F6-7890-1234-56789ABCDEF0'),
('66666666-CCCC-6666-6666-666666666666', '22222222-2222-2222-2222-222222222222', '22222222-AAAA-2222-2222-222222222222', 5000.00, 'Decoración y torta', 'Fiesta', GETDATE(), GETDATE(), NULL, '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA'),
('66666666-DDDD-6666-6666-666666666666', '22222222-2222-2222-2222-222222222222', '22222222-BBBB-2222-2222-222222222222', 3000.00, 'Bebidas y snacks', 'Comida', GETDATE(), GETDATE(), NULL, 'C3D4E5F6-A1B2-9012-3456-789ABCDEF012');

-- 8. Insertar detalles de gastos
-- GUIDs válidos para detalles de gasto
INSERT INTO DetallesGasto (IdDetalleGasto, IdGasto, IdMiembroDeudor, Monto, Pagado, UsuarioIdUsuario)
VALUES
('77777777-AAAA-7777-7777-777777777701', '66666666-AAAA-6666-6666-666666666666', '11111111-BBBB-1111-1111-111111111111', 4000.00, 1, 'A1B2C3D4-E5F6-7890-1234-56789ABCDEF0'),
('77777777-AAAA-7777-7777-777777777702', '66666666-AAAA-6666-6666-666666666666', '11111111-CCCC-1111-1111-111111111111', 4000.00, 0, 'B2C3D4E5-F6A1-8901-2345-6789ABCDEF01'),
('77777777-AAAA-7777-7777-777777777703', '66666666-AAAA-6666-6666-666666666666', '11111111-AAAA-1111-1111-111111111111', 4000.00, 1, '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA'),
('77777777-BBBB-7777-7777-777777777704', '66666666-BBBB-6666-6666-666666666666', '11111111-AAAA-1111-1111-111111111111', 1000.00, 1, '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA'),
('77777777-BBBB-7777-7777-777777777705', '66666666-BBBB-6666-6666-666666666666', '11111111-BBBB-1111-1111-111111111111', 1000.00, 1, 'A1B2C3D4-E5F6-7890-1234-56789ABCDEF0'),
('77777777-BBBB-7777-7777-777777777706', '66666666-BBBB-6666-6666-666666666666', '11111111-CCCC-1111-1111-111111111111', 1000.00, 0, 'B2C3D4E5-F6A1-8901-2345-6789ABCDEF01'),
('77777777-CCCC-7777-7777-777777777707', '66666666-CCCC-6666-6666-666666666666', '22222222-AAAA-2222-2222-222222222222', 1666.67, 1, '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA'),
('77777777-CCCC-7777-7777-777777777708', '66666666-CCCC-6666-6666-666666666666', '22222222-BBBB-2222-2222-222222222222', 1666.67, 0, 'C3D4E5F6-A1B2-9012-3456-789ABCDEF012'),
('77777777-CCCC-7777-7777-777777777709', '66666666-CCCC-6666-6666-666666666666', '22222222-CCCC-2222-2222-222222222222', 1666.66, 0, 'D4E5F6A1-B2C3-0123-4567-89ABCDEF0123'),
('77777777-DDDD-7777-7777-777777777710', '66666666-DDDD-6666-6666-666666666666', '22222222-AAAA-2222-2222-222222222222', 1000.00, 1, '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA'),
('77777777-DDDD-7777-7777-777777777711', '66666666-DDDD-6666-6666-666666666666', '22222222-BBBB-2222-2222-222222222222', 1000.00, 1, 'C3D4E5F6-A1B2-9012-3456-789ABCDEF012'),
('77777777-DDDD-7777-7777-777777777712', '66666666-DDDD-6666-6666-666666666666', '22222222-CCCC-2222-2222-222222222222', 1000.00, 0, 'D4E5F6A1-B2C3-0123-4567-89ABCDEF0123');

-- 9. Insertar pagos
-- GUIDs válidos para pagos
-- Usar los IdMiembro de MiembrosGrupo para IdPagador e IdReceptor
-- Grupo 1: Viaje a Bariloche
--   Juan Prueba: 11111111-AAAA-1111-1111-111111111111
--   María López: 11111111-BBBB-1111-1111-111111111111
--   Carlos Gómez: 11111111-CCCC-1111-1111-111111111111
-- Grupo 2: Cumpleaños Sofía
--   Juan Prueba: 22222222-AAAA-2222-2222-222222222222
--   Lucía Fernández: 22222222-BBBB-2222-2222-222222222222
--   Martín Pérez: 22222222-CCCC-2222-2222-222222222222

INSERT INTO Pagos (IdPago, IdPagador, IdReceptor, IdGrupo, Monto, Concepto, Estado, FechaCreacion, FechaPago, FechaConfirmacion, ComprobantePath, MotivoRechazo)
VALUES
('88888888-AAAA-8888-8888-888888888801', '11111111-BBBB-1111-1111-111111111111', '11111111-AAAA-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 4000.00, 'Pago de excursión', 'Completado', GETDATE(), GETDATE(), GETDATE(), NULL, NULL),
('88888888-AAAA-8888-8888-888888888802', '11111111-CCCC-1111-1111-111111111111', '11111111-AAAA-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 4000.00, 'Pago de alojamiento', 'Pendiente', GETDATE(), NULL, NULL, NULL, NULL),
('88888888-AAAA-8888-8888-888888888803', '22222222-BBBB-2222-2222-222222222222', '22222222-AAAA-2222-2222-222222222222', '22222222-2222-2222-2222-222222222222', 1666.67, 'Pago decoración', 'Completado', GETDATE(), GETDATE(), GETDATE(), NULL, NULL);

-- 10. Insertar notificaciones
-- GUIDs válidos para notificaciones
INSERT INTO Notificaciones (IdNotificacion, IdUsuario, IdGrupo, Tipo, Mensaje, Estado, FechaCreacion, FechaEnvio, CanalEnvio, UsuarioIdUsuario, GrupoIdGrupo)
VALUES
('99999999-AAAA-9999-9999-999999999901', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', '11111111-1111-1111-1111-111111111111', 'Gasto', 'Se ha registrado un nuevo gasto: Alquiler de cabaña', 'Pendiente', GETDATE(), NULL, 'Email', NULL, NULL),
('99999999-AAAA-9999-9999-999999999902', 'A1B2C3D4-E5F6-7890-1234-56789ABCDEF0', '11111111-1111-1111-1111-111111111111', 'Pago', 'Tu pago de excursión fue registrado', 'Enviado', GETDATE(), GETDATE(), 'Push', NULL, NULL),
('99999999-AAAA-9999-9999-999999999903', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', '22222222-2222-2222-2222-222222222222', 'Recordatorio', 'No olvides comprar la torta para el cumpleaños', 'Pendiente', GETDATE(), NULL, 'Email', NULL, NULL);

-- 11. Insertar recordatorios
-- GUIDs válidos para recordatorios
INSERT INTO Recordatorios (IdRecordatorio, IdUsuario, IdGrupo, IdReferencia, Titulo, Mensaje, Tipo, FechaCreacion, FechaRecordatorio, Completado, Repetir, FrecuenciaRepeticion, Estado)
VALUES
('AAAAAAA1-AAAA-AAAA-AAAA-AAAAAAAAAAA1', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', '11111111-1111-1111-1111-111111111111', '66666666-AAAA-6666-6666-666666666666', 'Pagar alojamiento', 'Recuerda pagar el alojamiento antes del viaje', 'Pago', GETDATE(), DATEADD(DAY, 2, GETDATE()), 0, 1, 'Una vez', 'Pendiente'),
('AAAAAAA2-AAAA-AAAA-AAAA-AAAAAAAAAAA2', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', '22222222-2222-2222-2222-222222222222', '66666666-CCCC-6666-6666-666666666666', 'Comprar decoración', 'No olvides comprar la decoración para la fiesta', 'Tarea', GETDATE(), DATEADD(DAY, 1, GETDATE()), 0, 0, 'Una vez', 'Pendiente');

-- 12. Insertar movimientos de caja
INSERT INTO MovimientosCaja (IdMovimiento, IdCaja, IdUsuario, Monto, TipoMovimiento, Concepto, Fecha, ComprobantePath)
VALUES
('55555555-AAAA-5555-5555-555555555555', '33333333-AAAA-3333-3333-333333333333', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', 5000.00, 'Ingreso', 'Aporte inicial', GETDATE(), NULL),
('55555555-BBBB-5555-5555-555555555555', '33333333-AAAA-3333-3333-333333333333', 'A1B2C3D4-E5F6-7890-1234-56789ABCDEF0', 4000.00, 'Ingreso', 'Aporte de María', GETDATE(), NULL),
('55555555-CCCC-5555-5555-555555555555', '33333333-AAAA-3333-3333-333333333333', 'B2C3D4E5-F6A1-8901-2345-6789ABCDEF01', 4000.00, 'Ingreso', 'Aporte de Carlos', GETDATE(), NULL),
('55555555-DDDD-5555-5555-555555555555', '44444444-BBBB-4444-4444-444444444444', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', 3000.00, 'Ingreso', 'Aporte para la fiesta', GETDATE(), NULL),
('55555555-EEEE-5555-5555-555555555555', '44444444-BBBB-4444-4444-444444444444', 'C3D4E5F6-A1B2-9012-3456-789ABCDEF012', 2500.00, 'Ingreso', 'Aporte de Lucía', GETDATE(), NULL),
('55555555-FFFF-5555-5555-555555555555', '44444444-BBBB-4444-4444-444444444444', 'D4E5F6A1-B2C3-0123-4567-89ABCDEF0123', 2500.00, 'Ingreso', 'Aporte de Martín', GETDATE(), NULL);

-- 13. Insertar configuraciones de notificaciones
-- GUIDs válidos para configuraciones de notificaciones
INSERT INTO ConfiguracionesNotificaciones (IdConfiguracion, IdUsuario, NotificarNuevosPagos, NotificarNuevosGastos, NotificarInvitacionesGrupo, NotificarCambiosEstadoPagos, RecordatoriosDeudas, RecordatoriosPagos, FrecuenciaRecordatorios)
VALUES
('BBBBBBB1-BBBB-BBBB-BBBB-BBBBBBBBBB01', '6E1AD193-24E9-4FC1-A051-F7C9B6E73AFA', 1, 1, 1, 1, 1, 1, 'Semanal'),
('BBBBBBB2-BBBB-BBBB-BBBB-BBBBBBBBBB02', 'A1B2C3D4-E5F6-7890-1234-56789ABCDEF0', 1, 1, 1, 1, 1, 1, 'Semanal'),
('BBBBBBB3-BBBB-BBBB-BBBB-BBBBBBBBBB03', 'B2C3D4E5-F6A1-8901-2345-6789ABCDEF01', 1, 1, 1, 1, 1, 1, 'Semanal'),
('BBBBBBB4-BBBB-BBBB-BBBB-BBBBBBBBBB04', 'C3D4E5F6-A1B2-9012-3456-789ABCDEF012', 1, 1, 1, 1, 1, 1, 'Semanal'),
('BBBBBBB5-BBBB-BBBB-BBBB-BBBBBBBBBB05', 'D4E5F6A1-B2C3-0123-4567-89ABCDEF0123', 1, 1, 1, 1, 1, 1, 'Semanal'),
('BBBBBBB6-BBBB-BBBB-BBBB-BBBBBBBBBB06', 'E5F6A1B2-C3D4-1234-5678-9ABCDEF01234', 1, 1, 1, 1, 1, 1, 'Semanal');

-- FIN DEL SCRIPT
